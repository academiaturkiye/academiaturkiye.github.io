<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Strategic users in EIP 1559</title>
  
  
  
  
  <meta property="og:title" content="Strategic users in EIP 1559" />
  <meta property="og:url" content="https://ethereum.github.io/abm1559/notebooks/strategicUser.html" />
  <meta property="og:image" content="https://ethereum.github.io/rig/static/rig.png" />
  <meta property="og:description" content="When keeping the tip low, goes wrong" />
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Strategic users in EIP 1559">
  <meta name="twitter:description" content="When keeping the tip low, goes wrong">
  <meta name="twitter:image" content="https://ethereum.github.io/rig/static/rig.png">

  <script src="https://cdn.jsdelivr.net/npm/underscore@1.13.1/underscore-umd-min.js" type="text/javascript"></script>
  <script src="https://ethereum.github.io/rig/static/react.development.js"></script>
  <script src="https://ethereum.github.io/rig/static/react-dom.development.js"></script>
  <script src="https://ethereum.github.io/rig/static/component-library.js"></script>
  <script src="https://ethereum.github.io/rig/static/header.js"></script>
  <script src="https://ethereum.github.io/rig/static/footer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>





<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>



<link rel="stylesheet" type="text/css" href="https://ethereum.github.io/rig/static/jupyter.css"/>
<link rel="stylesheet" type="text/css" href="https://ethereum.github.io/rig/static/theme-light.css"/>
<style type="text/css">
a.anchor-link {
   display: none;
}
.highlight  {
    margin: 0.4em;
}

/* Input area styling */
.jp-InputArea {
    overflow: hidden;
}

.jp-InputArea-editor {
    overflow: hidden;
}

@media print {
  body {
    margin: 0;
  }
}
</style>


<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML-full,Safe"> </script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: { 
                    automatic: true 
                    }
                },
                "HTML-CSS": {
                    linebreaks: { 
                    automatic: true 
                    }
                }
            });
        
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
    <!-- End of mathjax configuration -->
  <link rel="stylesheet" type="text/css" href="https://ethereum.github.io/rig/static/index.css"/>
</head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">

  <div id="header"></div>
  <script>
    ReactDOM.render(
      e(Header, null),
      document.querySelector("#header")
    );
    const hamburger = document.querySelector(".hamburger");
    const navMenu = document.querySelector(".nav-menu");

    function mobileMenu() {
        hamburger.classList.toggle("active");
        navMenu.classList.toggle("active");
    }

    function closeMenu() {
        hamburger.classList.remove("active");
        navMenu.classList.remove("active");
    }

    hamburger.addEventListener("click", mobileMenu);

    const navLink = document.querySelectorAll(".nav-link");

    navLink.forEach(n => n.addEventListener("click", closeMenu));
  </script>
  <div class="article-container">
    <div class="document-container">
      <div class="title-container">
        <div class="title">
          Strategic users in EIP 1559
        </div>

        <div class="sub-title">
          
        </div>
      </div>

      <div id="toc-author-block">
        <div id="authors"></div>
        <div id="toc"></div>
      </div>
      
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <h2 id="TL;DR">TL;DR<a class="anchor-link" href="#TL;DR">&#182;</a></h2><ul>
<li>EIP 1559 is a proposed improvement for the transaction fee market. It sets a variable "base" gasprice to be paid by the user and burned by the protocol, in addition to a "tip" paid by the user to the block producer.</li>
<li>When there are more users willing to pay the base price than there is space in the block, users are incentivised to compete against each other with the "tip".</li>
<li>Yet, once the basefee prices out all but a target size set of users, this strategic incentive disappears, and users can resume bidding the basefee plus a nominal tip.</li>
</ul>
<hr>
<p>In our <a href="https://ethereum.github.com/abm1559/stationary1559.html">previous notebook</a>, we simulated users interacting with the EIP 1559 transaction fee market mechanism for inclusion. Our users were strategic to some extent: they observed the prevailing basefee, evaluated their values and costs and decided whether to send a transaction or not. We saw that once the system reaches stationarity, users who aren't deterred by the basefee can expect next-block inclusion.</p>
<p>We made one big assumption there, which is that users respect the commonly stated heuristic of setting their premiums (in general, what the miner receives from the transaction) at a fixed value compensating the miner for the extra work of including one extra transaction. In this notebook, we relax this assumption and look at what happens when users bid strategically, trying to outcompete each other in transitionary periods, before the basefee settles.</p>
<p>Firstly, let's load up a few classes from our <a href="https://github.com/ethereum/abm1559"><code>abm1559</code></a> library.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">pardir</span><span class="p">))</span>

<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format = &#39;svg&#39;

<span class="kn">from</span> <span class="nn">abm1559.utils</span> <span class="kn">import</span> <span class="n">constants</span>

<span class="kn">from</span> <span class="nn">abm1559.txpool</span> <span class="kn">import</span> <span class="n">TxPool</span>

<span class="kn">from</span> <span class="nn">abm1559.users</span> <span class="kn">import</span> <span class="n">User1559</span>

<span class="kn">from</span> <span class="nn">abm1559.userpool</span> <span class="kn">import</span> <span class="n">UserPool</span>

<span class="kn">from</span> <span class="nn">abm1559.chain</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Chain</span><span class="p">,</span>
    <span class="n">Block1559</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">abm1559.simulator</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">spawn_poisson_heterogeneous_demand</span><span class="p">,</span>
    <span class="n">update_basefee</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <h2 id="Introducing-strategic-users">Introducing strategic users<a class="anchor-link" href="#Introducing-strategic-users">&#182;</a></h2><p>Our previous simulation only featured one type of users, <code>User1559</code>. Users received some random value (in Gwei, per gas unit) for transaction inclusion and costs (in Gwei, per gas and time unit) for waiting.</p>
<p>For instance, Alice has 15 Gwei/gas value for inclusion, and cost 0.5 Gwei/gas/block. If Alice waits for 5 blocks to be included, her payoff for each gas unit she obtains is 15 - 5 * 0.5 = 12.5. To this, we subtract the fee Alice must pay for inclusion, or <em>gas price</em>. Assuming the basefee currently sits at 10 Gwei/gas and Alice set her premium at 1 Gwei/gas, her total gas price is 11 Gwei/gas. Her final payoff is then 12.5 - 11 = 1.5 Gwei/gas. In other words:</p>
$$ \texttt{payoff} = \texttt{value} - \texttt{cost from waiting} - \texttt{transaction fee} $$<p>Users estimate their final payoff by estimating how long they will wait for inclusion. Our default <code>User1559</code> estimates a fixed waiting time of 5 blocks. Let's go ahead and change that to zero, as we have done with the <code>OptimisticUser</code> in the previous notebook. The <code>OptimisticUser</code> expects next block inclusion.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">OptimisticUser</span><span class="p">(</span><span class="n">User1559</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">expected_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p><code>OptimisticUser</code>s expect a small waiting time, but still set their premium to a fixed value. Can a strategic user do better? Let's find out!</p>
<p>We'll subclass our <code>User1559</code> again to define the strategic user.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">StrategicUser</span><span class="p">(</span><span class="n">User1559</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A strategic affine user sending 1559 transactions.</span>
<span class="sd">    </span>
<span class="sd">    - Expects to be included in the next block</span>
<span class="sd">    - Prefers not to participate if its expected payoff is negative</span>
<span class="sd">    - Strategic gas_premium</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># how much the user overbids by</span>

    <span class="k">def</span> <span class="nf">expected_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">decide_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;min_premium&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">min_premium</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">min_premium</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;min_premium&quot;</span><span class="p">]</span>

        <span class="n">gas_premium</span> <span class="o">=</span> <span class="n">min_premium</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsilon</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">)</span>
        <span class="n">max_fee</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;max_fee&quot;</span><span class="p">:</span> <span class="n">max_fee</span><span class="p">,</span> <span class="c1"># in wei</span>
            <span class="s2">&quot;gas_premium&quot;</span><span class="p">:</span> <span class="n">gas_premium</span><span class="p">,</span> <span class="c1"># in wei</span>
            <span class="s2">&quot;start_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wakeup_block</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">export</span><span class="p">(),</span>
            <span class="s2">&quot;user_type&quot;</span><span class="p">:</span> <span class="s2">&quot;strategic_user_1559&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;1559 strategic affine user with value </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> and cost </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cost_per_unit</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>As our <code>OptimisticUser</code> does, <code>StrategicUser</code> expects next-block inclusion. We also change <code>decide_parameters</code>: the strategic user sets its premium to <em>the minimum premium seen in the previous block</em>, plus 0.1 Gwei. Strategic users are trying to outbid the cheapest user (from the miner's point of view) who was included in the previous block.</p>
<p>Users attach premiums to their transactions as well as fee caps. The fee cap is an instruction to not charge a gas price greater than the cap, whatever happens with the basefee, and protects users from accidental overbidding. Miners receive either the whole premium or the slack between current basefee and feecap, whichever is lower. We call this the <em>tip</em>.</p>
$$ \texttt{tip} = \min(\texttt{fee cap} - \texttt{basefee}, \texttt{gas premium}) $$<p>We set the fee cap of strategic users like we set it for non-strategic ones: since users receive at most their value from getting included, they set their cap to their value.</p>
<h3 id="Mixed-simulations">Mixed simulations<a class="anchor-link" href="#Mixed-simulations">&#182;</a></h3><p>We'll now put <code>OptimisticUser</code>s against <code>StrategicUser</code>s. We modify the <code>simulate</code> function we used previously to specify at each simulation step how much of each type we expect to spawn. These are the simulation steps:</p>
<ol>
<li>We sample from a Poisson distribution to obtain the number of new users spawning between two blocks.</li>
<li>We spawn optimistic and strategic users according to the shares specified by <code>shares_scenario</code>.</li>
<li>Each user decides whether to transact or not (<code>decide_transactions</code>).</li>
<li>Transactions are added to the transaction pool.</li>
<li>The miner decides on a set of transactions to include, ranking transactions according to their tips, with higher tips at the top of the list.</li>
<li>A block is created and added to the chain.</li>
<li>Basefee is updated.</li>
<li>Repeat.</li>
</ol>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">demand_scenario</span><span class="p">,</span> <span class="n">shares_scenario</span><span class="p">):</span>
    <span class="c1"># Instantiate a couple of things</span>
    <span class="n">txpool</span> <span class="o">=</span> <span class="n">TxPool</span><span class="p">()</span>
    <span class="n">basefee</span> <span class="o">=</span> <span class="n">constants</span><span class="p">[</span><span class="s2">&quot;INITIAL_BASEFEE&quot;</span><span class="p">]</span>
    <span class="n">chain</span> <span class="o">=</span> <span class="n">Chain</span><span class="p">()</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">user_pool</span> <span class="o">=</span> <span class="n">UserPool</span><span class="p">()</span>
    <span class="n">min_premium</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">demand_scenario</span><span class="p">))):</span>
        
        <span class="c1"># `env` is the &quot;environment&quot; of the simulation</span>
        <span class="n">env</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;basefee&quot;</span><span class="p">:</span> <span class="n">basefee</span><span class="p">,</span>
            <span class="s2">&quot;current_block&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>
            <span class="s2">&quot;min_premium&quot;</span><span class="p">:</span> <span class="n">min_premium</span><span class="p">,</span>
        <span class="p">}</span>
        
        <span class="c1"># We return some demand which on expectation yields demand_scenario[t] new users per round</span>
        <span class="n">users</span> <span class="o">=</span> <span class="n">spawn_poisson_heterogeneous_demand</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">demand_scenario</span><span class="p">[</span><span class="n">t</span><span class="p">],</span> <span class="n">shares_scenario</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
        
        <span class="c1"># Add users to the pool and check who wants to transact</span>
        <span class="c1"># We query each new user with the current basefee value</span>
        <span class="c1"># Users either return a transaction or None if they prefer to balk</span>
        <span class="n">decided_txs</span> <span class="o">=</span> <span class="n">user_pool</span><span class="o">.</span><span class="n">decide_transactions</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>

        <span class="c1"># New transactions are added to the transaction pool</span>
        <span class="n">txpool</span><span class="o">.</span><span class="n">add_txs</span><span class="p">(</span><span class="n">decided_txs</span><span class="p">)</span>

        <span class="c1"># The best valid transactions are taken out of the pool for inclusion</span>
        <span class="n">selected_txs</span> <span class="o">=</span> <span class="n">txpool</span><span class="o">.</span><span class="n">select_transactions</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
        <span class="n">txpool</span><span class="o">.</span><span class="n">remove_txs</span><span class="p">([</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">selected_txs</span><span class="p">])</span>

        <span class="c1"># We create a block with these transactions</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">Block1559</span><span class="p">(</span><span class="n">txs</span> <span class="o">=</span> <span class="n">selected_txs</span><span class="p">,</span> <span class="n">parent_hash</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">current_head</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">t</span><span class="p">,</span> <span class="n">basefee</span> <span class="o">=</span> <span class="n">basefee</span><span class="p">)</span>

        <span class="c1"># Record the min premium in the block</span>
        <span class="n">min_premium</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">min_premium</span><span class="p">()</span>
        
        <span class="c1"># The block is added to the chain</span>
        <span class="n">chain</span><span class="o">.</span><span class="n">add_block</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
        
        <span class="c1"># A couple of metrics we will use to monitor the simulation</span>
        <span class="n">pool_strat_users</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
                <span class="p">[</span><span class="n">tx</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">txpool</span><span class="o">.</span><span class="n">txs</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">user_pool</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">tx</span><span class="o">.</span><span class="n">sender</span><span class="p">])</span> <span class="o">==</span> <span class="n">StrategicUser</span><span class="p">])</span>
        <span class="n">pool_nonstrat_users</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
                <span class="p">[</span><span class="n">tx</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">txpool</span><span class="o">.</span><span class="n">txs</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">user_pool</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">tx</span><span class="o">.</span><span class="n">sender</span><span class="p">])</span> <span class="o">==</span> <span class="n">OptimisticUser</span><span class="p">])</span>

        <span class="n">row_metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;block&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>
            <span class="s2">&quot;basefee&quot;</span><span class="p">:</span> <span class="n">basefee</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">),</span>
            <span class="s2">&quot;users&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">),</span>
            <span class="s2">&quot;strategic&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">([</span><span class="n">user</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="o">==</span> <span class="n">StrategicUser</span><span class="p">]),</span>
            <span class="s2">&quot;nonstategic&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">([</span><span class="n">user</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="o">==</span> <span class="n">OptimisticUser</span><span class="p">]),</span>
            <span class="s2">&quot;decided_txs&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">decided_txs</span><span class="p">),</span>
            <span class="s2">&quot;included_txs&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_txs</span><span class="p">),</span>
            <span class="s2">&quot;blk_min_premium&quot;</span><span class="p">:</span> <span class="n">block</span><span class="o">.</span><span class="n">min_premium</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">),</span> <span class="c1"># to Gwei</span>
            <span class="s2">&quot;blk_avg_gas_price&quot;</span><span class="p">:</span> <span class="n">block</span><span class="o">.</span><span class="n">average_gas_price</span><span class="p">(),</span>
            <span class="s2">&quot;blk_avg_tip&quot;</span><span class="p">:</span> <span class="n">block</span><span class="o">.</span><span class="n">average_tip</span><span class="p">(),</span>
            <span class="s2">&quot;pool_length&quot;</span><span class="p">:</span> <span class="n">txpool</span><span class="o">.</span><span class="n">pool_length</span><span class="p">(),</span>
            <span class="s2">&quot;pool_strat_users&quot;</span><span class="p">:</span> <span class="n">pool_strat_users</span><span class="p">,</span>
            <span class="s2">&quot;pool_nonstrat_users&quot;</span><span class="p">:</span> <span class="n">pool_nonstrat_users</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">metrics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_metrics</span><span class="p">)</span>

        <span class="c1"># Finally, basefee is updated and a new round starts</span>
        <span class="n">basefee</span> <span class="o">=</span> <span class="n">update_basefee</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">basefee</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">metrics</span><span class="p">),</span> <span class="n">user_pool</span><span class="p">,</span> <span class="n">chain</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We'll start with a simulation for 200 blocks. We set equal shares of strategic and non-strategic users, with on average a total of 2500 users spawning each round. Remember that our blocks can accommodate at most 952 users, but target inclusion of about half of this number, i.e., 475 of them. There is plenty of space then for strategic users (on average 1250 of them each round) to grab all the available space.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">blocks</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">demand_scenario</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2500</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">blocks</span><span class="p">)]</span>

<span class="n">strategic_share</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">shares_scenario</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="n">StrategicUser</span><span class="p">:</span> <span class="n">strategic_share</span><span class="p">,</span>
    <span class="n">OptimisticUser</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">strategic_share</span><span class="p">,</span>
<span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">blocks</span><span class="p">)]</span>

<span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">user_pool</span><span class="p">,</span> <span class="n">chain</span><span class="p">)</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="n">demand_scenario</span><span class="p">,</span> <span class="n">shares_scenario</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>


<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr">
<pre>100%|██████████| 100/100 [00:13&lt;00:00,  7.34it/s]
</pre>
</div>
</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>What does <code>df</code> reveal?</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block</th>
      <th>basefee</th>
      <th>users</th>
      <th>strategic</th>
      <th>nonstategic</th>
      <th>decided_txs</th>
      <th>included_txs</th>
      <th>blk_min_premium</th>
      <th>blk_avg_gas_price</th>
      <th>blk_avg_tip</th>
      <th>pool_length</th>
      <th>pool_strat_users</th>
      <th>pool_nonstrat_users</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1.000000</td>
      <td>2571</td>
      <td>1285</td>
      <td>1286</td>
      <td>2313</td>
      <td>1190</td>
      <td>1.0</td>
      <td>2.097143</td>
      <td>1.097143</td>
      <td>1123</td>
      <td>0</td>
      <td>1123</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1.124900</td>
      <td>2521</td>
      <td>1260</td>
      <td>1261</td>
      <td>2251</td>
      <td>1190</td>
      <td>1.0</td>
      <td>2.219354</td>
      <td>1.094454</td>
      <td>2184</td>
      <td>0</td>
      <td>2184</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>1.265400</td>
      <td>2465</td>
      <td>1232</td>
      <td>1233</td>
      <td>2186</td>
      <td>1190</td>
      <td>1.0</td>
      <td>2.356829</td>
      <td>1.091429</td>
      <td>3180</td>
      <td>0</td>
      <td>3180</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>1.423448</td>
      <td>2475</td>
      <td>1237</td>
      <td>1238</td>
      <td>2163</td>
      <td>1190</td>
      <td>1.0</td>
      <td>2.514205</td>
      <td>1.090756</td>
      <td>4153</td>
      <td>0</td>
      <td>4153</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>1.601237</td>
      <td>2513</td>
      <td>1256</td>
      <td>1257</td>
      <td>2210</td>
      <td>1190</td>
      <td>1.0</td>
      <td>2.693674</td>
      <td>1.092437</td>
      <td>5173</td>
      <td>0</td>
      <td>5173</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>95</td>
      <td>14.355473</td>
      <td>2551</td>
      <td>1275</td>
      <td>1276</td>
      <td>588</td>
      <td>588</td>
      <td>1.0</td>
      <td>15.404113</td>
      <td>1.048639</td>
      <td>8930</td>
      <td>0</td>
      <td>8930</td>
    </tr>
    <tr>
      <th>96</th>
      <td>96</td>
      <td>14.333653</td>
      <td>2531</td>
      <td>1265</td>
      <td>1266</td>
      <td>565</td>
      <td>565</td>
      <td>1.0</td>
      <td>15.382680</td>
      <td>1.049027</td>
      <td>8930</td>
      <td>0</td>
      <td>8930</td>
    </tr>
    <tr>
      <th>97</th>
      <td>97</td>
      <td>14.242634</td>
      <td>2644</td>
      <td>1322</td>
      <td>1322</td>
      <td>609</td>
      <td>609</td>
      <td>1.0</td>
      <td>15.296822</td>
      <td>1.054187</td>
      <td>8930</td>
      <td>0</td>
      <td>8930</td>
    </tr>
    <tr>
      <th>98</th>
      <td>98</td>
      <td>14.283796</td>
      <td>2530</td>
      <td>1265</td>
      <td>1265</td>
      <td>589</td>
      <td>589</td>
      <td>1.0</td>
      <td>15.331843</td>
      <td>1.048048</td>
      <td>8930</td>
      <td>0</td>
      <td>8930</td>
    </tr>
    <tr>
      <th>99</th>
      <td>99</td>
      <td>14.265084</td>
      <td>2419</td>
      <td>1209</td>
      <td>1210</td>
      <td>553</td>
      <td>553</td>
      <td>1.0</td>
      <td>15.316983</td>
      <td>1.051899</td>
      <td>8930</td>
      <td>0</td>
      <td>8930</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 13 columns</p>
</div>
</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We see on average 2500 <code>users</code>, with half of them <code>strategic</code> and the other half <code>nonstrategic</code>. Many decide to transact in the first few rounds, more than are eventually included (<code>decided_txs</code> &gt; <code>included_txs</code>). The pool length, i.e., how many decided transactions were not included yet, increases steadily, with most users in the pool non-strategic users! We have the first clue that being strategic is not a bad idea, so let's dig a little more in results.</p>
<h3 id="Strategic-users-enter-a-bidding-war">Strategic users enter a bidding war<a class="anchor-link" href="#Strategic-users-enter-a-bidding-war">&#182;</a></h3><p>Let's look at the basefee and the minimum premium in a block.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;basefee&quot;</span><span class="p">,</span> <span class="s2">&quot;blk_min_premium&quot;</span><span class="p">])</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;AxesSubplot:xlabel=&#39;block&#39;&gt;</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.19625pt" version="1.1" viewBox="0 0 378.465625 262.19625" width="378.465625pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:02.246021</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M 0 262.19625 
L 378.465625 262.19625 
L 378.465625 0 
L 0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 36.465625 224.64 
L 371.265625 224.64 
L 371.265625 7.2 
L 36.465625 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="m426309ec1d" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="51.683807" xlink:href="#m426309ec1d" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(48.502557 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="113.17141" xlink:href="#m426309ec1d" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(106.80891 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="174.659013" xlink:href="#m426309ec1d" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(168.296513 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="236.146617" xlink:href="#m426309ec1d" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(229.784117 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="297.63422" xlink:href="#m426309ec1d" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(291.27172 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="359.121823" xlink:href="#m426309ec1d" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(349.578073 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block -->
     <g transform="translate(190.598438 252.916562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m54dcae1132" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="198.247333"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 2.5 -->
      <g transform="translate(13.5625 202.046552)scale(0.1 -0.1)">
       <defs>
        <path d="M 684 794 
L 1344 794 
L 1344 0 
L 684 0 
L 684 794 
z
" id="DejaVuSans-2e" transform="scale(0.015625)"/>
        <path d="M 691 4666 
L 3169 4666 
L 3169 4134 
L 1269 4134 
L 1269 2991 
Q 1406 3038 1543 3061 
Q 1681 3084 1819 3084 
Q 2600 3084 3056 2656 
Q 3513 2228 3513 1497 
Q 3513 744 3044 326 
Q 2575 -91 1722 -91 
Q 1428 -91 1123 -41 
Q 819 9 494 109 
L 494 744 
Q 775 591 1075 516 
Q 1375 441 1709 441 
Q 2250 441 2565 725 
Q 2881 1009 2881 1497 
Q 2881 1984 2565 2268 
Q 2250 2553 1709 2553 
Q 1456 2553 1204 2497 
Q 953 2441 691 2322 
L 691 4666 
z
" id="DejaVuSans-35" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-2e"/>
       <use x="95.410156" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="170.732283"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 5.0 -->
      <g transform="translate(13.5625 174.531502)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-35"/>
       <use x="63.623047" xlink:href="#DejaVuSans-2e"/>
       <use x="95.410156" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="143.217233"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 7.5 -->
      <g transform="translate(13.5625 147.016452)scale(0.1 -0.1)">
       <defs>
        <path d="M 525 4666 
L 3525 4666 
L 3525 4397 
L 1831 0 
L 1172 0 
L 2766 4134 
L 525 4134 
L 525 4666 
z
" id="DejaVuSans-37" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-37"/>
       <use x="63.623047" xlink:href="#DejaVuSans-2e"/>
       <use x="95.410156" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="115.702182"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 10.0 -->
      <g transform="translate(7.2 119.501401)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="88.187132"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 12.5 -->
      <g transform="translate(7.2 91.986351)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-32"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="60.672082"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 15.0 -->
      <g transform="translate(7.2 64.471301)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-35"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_7">
     <g id="line2d_13">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m54dcae1132" y="33.157031"/>
      </g>
     </g>
     <g id="text_14">
      <!-- 17.5 -->
      <g transform="translate(7.2 36.95625)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-37"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_14">
    <path clip-path="url(#pe58120bd2c)" d="M 51.683807 214.756364 
L 54.758187 213.381712 
L 57.832567 211.835366 
L 60.906947 210.095881 
L 63.981327 208.139135 
L 67.055708 205.937991 
L 70.130088 203.461925 
L 73.204468 200.676597 
L 76.278848 197.543383 
L 79.353228 194.018829 
L 82.427608 190.054059 
L 85.501989 185.59409 
L 88.576369 180.57707 
L 91.650749 174.933424 
L 94.725129 168.584887 
L 97.799509 161.443418 
L 100.873889 153.409979 
L 103.94827 144.373164 
L 107.02265 134.20765 
L 110.09703 122.772464 
L 113.17141 109.909023 
L 116.24579 95.438938 
L 119.32017 79.16154 
L 122.394551 60.851094 
L 125.468931 40.253674 
L 128.543311 17.083636 
L 131.617691 36.551277 
L 134.692071 30.481384 
L 137.766451 48.822176 
L 140.840832 34.48825 
L 143.915212 50.886181 
L 146.989592 53.906293 
L 150.063972 54.023155 
L 153.138352 60.198898 
L 156.212732 48.733627 
L 159.287113 57.590375 
L 162.361493 63.743789 
L 165.435873 59.362806 
L 168.510253 63.214956 
L 171.584633 65.441856 
L 174.659013 61.914805 
L 177.733394 64.847676 
L 180.807774 67.086 
L 183.882154 64.194916 
L 186.956534 66.883399 
L 190.030914 67.491905 
L 193.105294 67.233924 
L 196.179675 70.005002 
L 199.254055 64.713924 
L 202.328435 67.39377 
L 205.402815 69.862737 
L 208.477195 70.52531 
L 211.551575 69.066082 
L 214.625956 68.382886 
L 217.700336 66.870469 
L 220.774716 67.812698 
L 223.849096 69.512237 
L 226.923476 69.421611 
L 229.997856 69.396597 
L 233.072237 68.977537 
L 236.146617 68.19518 
L 239.220997 68.633217 
L 242.295377 69.301016 
L 245.369757 68.98027 
L 248.444137 68.658867 
L 251.518518 69.854425 
L 254.592898 69.240147 
L 257.667278 70.497021 
L 260.741658 70.99387 
L 263.816038 68.401497 
L 266.890418 68.706778 
L 269.964799 69.473209 
L 273.039179 69.710768 
L 276.113559 69.521946 
L 279.187939 69.037601 
L 282.262319 69.407471 
L 285.336699 69.119778 
L 288.41108 70.377618 
L 291.48546 69.928556 
L 294.55984 69.870898 
L 297.63422 70.598911 
L 300.7086 70.769591 
L 303.78298 69.540498 
L 306.857361 68.596918 
L 309.931741 70.387032 
L 313.006121 69.579081 
L 316.080501 70.275658 
L 319.154881 70.577302 
L 322.229261 71.008717 
L 325.303642 70.398987 
L 328.378022 69.493219 
L 331.452402 69.041601 
L 334.526782 68.983614 
L 337.601162 70.143777 
L 340.675542 68.550243 
L 343.749923 67.765754 
L 346.824303 68.005909 
L 349.898683 69.007663 
L 352.973063 68.554641 
L 356.047443 68.760584 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_15">
    <path clip-path="url(#pe58120bd2c)" d="M 51.683807 214.756364 
L 54.758187 214.756364 
L 57.832567 214.756364 
L 60.906947 214.756364 
L 63.981327 214.756364 
L 67.055708 214.756364 
L 70.130088 214.756364 
L 73.204468 214.756364 
L 76.278848 214.756364 
L 79.353228 214.756364 
L 82.427608 214.756364 
L 85.501989 214.756364 
L 88.576369 214.756364 
L 91.650749 214.756364 
L 94.725129 214.756364 
L 97.799509 214.756364 
L 100.873889 214.756364 
L 103.94827 214.756364 
L 107.02265 214.756364 
L 110.09703 214.756364 
L 113.17141 214.756364 
L 116.24579 214.756364 
L 119.32017 214.756364 
L 122.394551 214.756364 
L 125.468931 214.756364 
L 128.543311 214.756364 
L 131.617691 214.756364 
L 134.692071 214.756364 
L 137.766451 214.756364 
L 140.840832 214.756364 
L 143.915212 214.756364 
L 146.989592 214.756364 
L 150.063972 214.756364 
L 153.138352 214.756364 
L 156.212732 214.756364 
L 159.287113 214.756364 
L 162.361493 214.756364 
L 165.435873 214.756364 
L 168.510253 214.756364 
L 171.584633 214.756364 
L 174.659013 214.756364 
L 177.733394 214.756364 
L 180.807774 214.756364 
L 183.882154 214.756364 
L 186.956534 214.756364 
L 190.030914 214.756364 
L 193.105294 214.756364 
L 196.179675 214.756364 
L 199.254055 214.756364 
L 202.328435 214.756364 
L 205.402815 214.756364 
L 208.477195 214.756364 
L 211.551575 214.756364 
L 214.625956 214.756364 
L 217.700336 214.756364 
L 220.774716 214.756364 
L 223.849096 214.756364 
L 226.923476 214.756364 
L 229.997856 214.756364 
L 233.072237 214.756364 
L 236.146617 214.756364 
L 239.220997 214.756364 
L 242.295377 214.756364 
L 245.369757 214.756364 
L 248.444137 214.756364 
L 251.518518 214.756364 
L 254.592898 214.756364 
L 257.667278 214.756364 
L 260.741658 214.756364 
L 263.816038 214.756364 
L 266.890418 214.756364 
L 269.964799 214.756364 
L 273.039179 214.756364 
L 276.113559 214.756364 
L 279.187939 214.756364 
L 282.262319 214.756364 
L 285.336699 214.756364 
L 288.41108 214.756364 
L 291.48546 214.756364 
L 294.55984 214.756364 
L 297.63422 214.756364 
L 300.7086 214.756364 
L 303.78298 214.756364 
L 306.857361 214.756364 
L 309.931741 214.756364 
L 313.006121 214.756364 
L 316.080501 214.756364 
L 319.154881 214.756364 
L 322.229261 214.756364 
L 325.303642 214.756364 
L 328.378022 214.756364 
L 331.452402 214.756364 
L 334.526782 214.756364 
L 337.601162 214.756364 
L 340.675542 214.756364 
L 343.749923 214.756364 
L 346.824303 214.756364 
L 349.898683 214.756364 
L 352.973063 214.756364 
L 356.047443 214.756364 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 36.465625 224.64 
L 36.465625 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 371.265625 224.64 
L 371.265625 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 36.465625 224.64 
L 371.265625 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 36.465625 7.2 
L 371.265625 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 243.507812 44.834375 
L 364.265625 44.834375 
Q 366.265625 44.834375 366.265625 42.834375 
L 366.265625 14.2 
Q 366.265625 12.2 364.265625 12.2 
L 243.507812 12.2 
Q 241.507812 12.2 241.507812 14.2 
L 241.507812 42.834375 
Q 241.507812 44.834375 243.507812 44.834375 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_16">
     <path d="M 245.507812 20.298437 
L 265.507812 20.298437 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_17"/>
    <g id="text_15">
     <!-- basefee -->
     <g transform="translate(273.507812 23.798437)scale(0.1 -0.1)">
      <defs>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 2375 4863 
L 2375 4384 
L 1825 4384 
Q 1516 4384 1395 4259 
Q 1275 4134 1275 3809 
L 1275 3500 
L 2222 3500 
L 2222 3053 
L 1275 3053 
L 1275 0 
L 697 0 
L 697 3053 
L 147 3053 
L 147 3500 
L 697 3500 
L 697 3744 
Q 697 4328 969 4595 
Q 1241 4863 1831 4863 
L 2375 4863 
z
" id="DejaVuSans-66" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-61"/>
      <use x="124.755859" xlink:href="#DejaVuSans-73"/>
      <use x="176.855469" xlink:href="#DejaVuSans-65"/>
      <use x="238.378906" xlink:href="#DejaVuSans-66"/>
      <use x="273.583984" xlink:href="#DejaVuSans-65"/>
      <use x="335.107422" xlink:href="#DejaVuSans-65"/>
     </g>
    </g>
    <g id="line2d_18">
     <path d="M 245.507812 34.976562 
L 265.507812 34.976562 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_19"/>
    <g id="text_16">
     <!-- blk_min_premium -->
     <g transform="translate(273.507812 38.476562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3328 2828 
Q 3544 3216 3844 3400 
Q 4144 3584 4550 3584 
Q 5097 3584 5394 3201 
Q 5691 2819 5691 2113 
L 5691 0 
L 5113 0 
L 5113 2094 
Q 5113 2597 4934 2840 
Q 4756 3084 4391 3084 
Q 3944 3084 3684 2787 
Q 3425 2491 3425 1978 
L 3425 0 
L 2847 0 
L 2847 2094 
Q 2847 2600 2669 2842 
Q 2491 3084 2119 3084 
Q 1678 3084 1418 2786 
Q 1159 2488 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1356 3278 1631 3431 
Q 1906 3584 2284 3584 
Q 2666 3584 2933 3390 
Q 3200 3197 3328 2828 
z
" id="DejaVuSans-6d" transform="scale(0.015625)"/>
       <path d="M 603 3500 
L 1178 3500 
L 1178 0 
L 603 0 
L 603 3500 
z
M 603 4863 
L 1178 4863 
L 1178 4134 
L 603 4134 
L 603 4863 
z
" id="DejaVuSans-69" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
       <path d="M 1159 525 
L 1159 -1331 
L 581 -1331 
L 581 3500 
L 1159 3500 
L 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
z
M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
" id="DejaVuSans-70" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
       <path d="M 544 1381 
L 544 3500 
L 1119 3500 
L 1119 1403 
Q 1119 906 1312 657 
Q 1506 409 1894 409 
Q 2359 409 2629 706 
Q 2900 1003 2900 1516 
L 2900 3500 
L 3475 3500 
L 3475 0 
L 2900 0 
L 2900 538 
Q 2691 219 2414 64 
Q 2138 -91 1772 -91 
Q 1169 -91 856 284 
Q 544 659 544 1381 
z
M 1991 3584 
L 1991 3584 
z
" id="DejaVuSans-75" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6b"/>
      <use x="149.169922" xlink:href="#DejaVuSans-5f"/>
      <use x="199.169922" xlink:href="#DejaVuSans-6d"/>
      <use x="296.582031" xlink:href="#DejaVuSans-69"/>
      <use x="324.365234" xlink:href="#DejaVuSans-6e"/>
      <use x="387.744141" xlink:href="#DejaVuSans-5f"/>
      <use x="437.744141" xlink:href="#DejaVuSans-70"/>
      <use x="501.220703" xlink:href="#DejaVuSans-72"/>
      <use x="540.083984" xlink:href="#DejaVuSans-65"/>
      <use x="601.607422" xlink:href="#DejaVuSans-6d"/>
      <use x="699.019531" xlink:href="#DejaVuSans-69"/>
      <use x="726.802734" xlink:href="#DejaVuSans-75"/>
      <use x="790.181641" xlink:href="#DejaVuSans-6d"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="pe58120bd2c">
   <rect height="217.44" width="334.8" x="36.465625" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">block</span> <span class="o">&gt;=</span> <span class="mi">24</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">block</span> <span class="o">&lt;=</span> <span class="mi">27</span><span class="p">)]</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>block</th>
      <th>basefee</th>
      <th>users</th>
      <th>strategic</th>
      <th>nonstategic</th>
      <th>decided_txs</th>
      <th>included_txs</th>
      <th>blk_min_premium</th>
      <th>blk_avg_gas_price</th>
      <th>blk_avg_tip</th>
      <th>pool_length</th>
      <th>pool_strat_users</th>
      <th>pool_nonstrat_users</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>24</th>
      <td>24</td>
      <td>16.855204</td>
      <td>2540</td>
      <td>1270</td>
      <td>1270</td>
      <td>270</td>
      <td>1190</td>
      <td>1.0</td>
      <td>17.867220</td>
      <td>1.012017</td>
      <td>11787</td>
      <td>0</td>
      <td>11787</td>
    </tr>
    <tr>
      <th>25</th>
      <td>25</td>
      <td>18.960418</td>
      <td>2528</td>
      <td>1264</td>
      <td>1264</td>
      <td>4</td>
      <td>151</td>
      <td>1.0</td>
      <td>19.488251</td>
      <td>0.527832</td>
      <td>11640</td>
      <td>0</td>
      <td>11640</td>
    </tr>
    <tr>
      <th>26</th>
      <td>26</td>
      <td>17.191601</td>
      <td>2558</td>
      <td>1279</td>
      <td>1279</td>
      <td>206</td>
      <td>748</td>
      <td>1.0</td>
      <td>17.865505</td>
      <td>0.673904</td>
      <td>11098</td>
      <td>0</td>
      <td>11098</td>
    </tr>
    <tr>
      <th>27</th>
      <td>27</td>
      <td>17.743108</td>
      <td>2492</td>
      <td>1246</td>
      <td>1246</td>
      <td>148</td>
      <td>148</td>
      <td>1.0</td>
      <td>18.792432</td>
      <td>1.049324</td>
      <td>11098</td>
      <td>0</td>
      <td>11098</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>Basefee increases until reaching its apex at block 26. This is the same behaviour we observed in the previous notebook: too many users want in so the basefee quickly reaches a high value, where no one is willing to pay this much. After the apex, the basefee climbs down, accommodating some of the most high-valued new users as well as equally high-valued users in the pool who were priced out.</p>
<p>We also plot (as seen in orange in the previous graph) the minimum premium observed in the block. The dynamics are curious: to understand them, remember that strategic users systematically bid just above the minimum premium observed in the previous block. During the transitionary period between blocks 0 and 26, too many users want in so the basefee increases. At the same time, the minimum premium observed in a block increases too. We can imagine that enough strategic users successfully outbid non-strategic ones to fill the whole block. Since strategic users always bid above the smallest premium in the previous block, they bid a premium of 1.1 Gwei the first time, then 1.2, then 1.3 etc. At this point, we recognise the unstable dynamics of the current first-price auction paradigm, where users bid <em>against each other</em> instead of bidding their true value.</p>
<p>As the basefee increases, fewer and fewer new strategic users decide to transact, since <strong>low-valued users are priced out</strong>, leaving some space for non-strategic users to be included. This releases some pressure on the premiums, until block 26 where the basefee is so high that no one is included (and the minimum premium is zero).</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;pool_length&quot;</span><span class="p">,</span> <span class="s2">&quot;users&quot;</span><span class="p">,</span> <span class="s2">&quot;pool_strat_users&quot;</span><span class="p">,</span> <span class="s2">&quot;pool_nonstrat_users&quot;</span><span class="p">])</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;AxesSubplot:xlabel=&#39;block&#39;&gt;</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.19625pt" version="1.1" viewBox="0 0 388.0125 262.19625" width="388.0125pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:02.407807</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M 0 262.19625 
L 388.0125 262.19625 
L 388.0125 0 
L 0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 46.0125 224.64 
L 380.8125 224.64 
L 380.8125 7.2 
L 46.0125 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="mf4a3911af6" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="61.230682" xlink:href="#mf4a3911af6" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(58.049432 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="122.718285" xlink:href="#mf4a3911af6" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(116.355785 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="184.205888" xlink:href="#mf4a3911af6" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(177.843388 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="245.693492" xlink:href="#mf4a3911af6" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(239.330992 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="307.181095" xlink:href="#mf4a3911af6" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(300.818595 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="368.668698" xlink:href="#mf4a3911af6" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(359.124948 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block -->
     <g transform="translate(200.145313 252.916562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m431e8c3440" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="214.756364"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 0 -->
      <g transform="translate(32.65 218.555582)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="187.074985"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 2000 -->
      <g transform="translate(13.5625 190.874203)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="159.393606"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 4000 -->
      <g transform="translate(13.5625 163.192824)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="131.712227"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 6000 -->
      <g transform="translate(13.5625 135.511445)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="104.030848"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 8000 -->
      <g transform="translate(13.5625 107.830066)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="76.349469"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 10000 -->
      <g transform="translate(7.2 80.148688)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
       <use x="254.492188" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_7">
     <g id="line2d_13">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="48.66809"/>
      </g>
     </g>
     <g id="text_14">
      <!-- 12000 -->
      <g transform="translate(7.2 52.467309)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-32"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
       <use x="254.492188" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_8">
     <g id="line2d_14">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="46.0125" xlink:href="#m431e8c3440" y="20.986711"/>
      </g>
     </g>
     <g id="text_15">
      <!-- 14000 -->
      <g transform="translate(7.2 24.78593)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-34"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
       <use x="254.492188" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_15">
    <path clip-path="url(#pd02486bb43)" d="M 61.230682 199.213269 
L 64.305062 184.528298 
L 67.379442 170.742971 
L 70.453822 157.27598 
L 73.528202 143.158477 
L 76.602583 129.013292 
L 79.676963 115.670868 
L 82.751343 103.850919 
L 85.825723 93.013659 
L 88.900103 80.432472 
L 91.974483 68.833974 
L 95.048864 58.481139 
L 98.123244 49.429328 
L 101.197624 41.581657 
L 104.272004 34.453702 
L 107.346384 27.477994 
L 110.420764 23.090496 
L 113.495145 19.270465 
L 116.569525 17.180521 
L 119.643905 17.083636 
L 122.718285 19.284306 
L 125.792665 23.270425 
L 128.867045 29.900115 
L 131.941426 38.882722 
L 135.015806 51.616157 
L 138.090186 53.650738 
L 141.164566 61.152392 
L 144.238946 61.152392 
L 147.313326 69.816663 
L 150.387707 69.816663 
L 153.462087 71.768201 
L 156.536467 74.56402 
L 159.610847 74.813152 
L 162.685227 80.515516 
L 165.759607 80.515516 
L 168.833988 80.515516 
L 171.908368 83.726556 
L 174.982748 83.726556 
L 178.057128 83.726556 
L 181.131508 85.581209 
L 184.205888 85.581209 
L 187.280269 85.581209 
L 190.354649 87.076003 
L 193.429029 87.076003 
L 196.503409 87.076003 
L 199.577789 87.532746 
L 202.652169 87.532746 
L 205.72655 90.079433 
L 208.80093 90.079433 
L 211.87531 90.079433 
L 214.94969 90.079433 
L 218.02407 90.61922 
L 221.09845 90.61922 
L 224.172831 90.61922 
L 227.247211 90.61922 
L 230.321591 90.61922 
L 233.395971 90.61922 
L 236.470351 90.61922 
L 239.544731 90.61922 
L 242.619112 90.61922 
L 245.693492 90.61922 
L 248.767872 90.61922 
L 251.842252 90.61922 
L 254.916632 90.61922 
L 257.991012 90.61922 
L 261.065393 90.61922 
L 264.139773 90.61922 
L 267.214153 90.61922 
L 270.288533 91.131325 
L 273.362913 91.131325 
L 276.437293 91.131325 
L 279.511674 91.131325 
L 282.586054 91.131325 
L 285.660434 91.131325 
L 288.734814 91.131325 
L 291.809194 91.131325 
L 294.883574 91.131325 
L 297.957955 91.131325 
L 301.032335 91.131325 
L 304.106715 91.131325 
L 307.181095 91.131325 
L 310.255475 91.131325 
L 313.329855 91.131325 
L 316.404236 91.131325 
L 319.478616 91.131325 
L 322.552996 91.131325 
L 325.627376 91.131325 
L 328.701756 91.131325 
L 331.776136 91.159007 
L 334.850517 91.159007 
L 337.924897 91.159007 
L 340.999277 91.159007 
L 344.073657 91.159007 
L 347.148037 91.159007 
L 350.222417 91.159007 
L 353.296798 91.159007 
L 356.371178 91.159007 
L 359.445558 91.159007 
L 362.519938 91.159007 
L 365.594318 91.159007 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_16">
    <path clip-path="url(#pd02486bb43)" d="M 61.230682 179.171951 
L 64.305062 179.863985 
L 67.379442 180.639064 
L 70.453822 180.500657 
L 73.528202 179.974711 
L 76.602583 178.729049 
L 79.676963 179.711738 
L 82.751343 180.680586 
L 85.825723 181.303417 
L 88.900103 178.729049 
L 91.974483 178.867456 
L 95.048864 179.227314 
L 98.123244 179.919348 
L 101.197624 180.625223 
L 104.272004 180.459135 
L 107.346384 179.254995 
L 110.420764 180.998922 
L 113.495145 179.54565 
L 116.569525 180.071596 
L 119.643905 179.462605 
L 122.718285 180.36225 
L 125.792665 180.223843 
L 128.867045 180.708267 
L 131.941426 179.088907 
L 135.015806 179.601012 
L 138.090186 179.767101 
L 141.164566 179.35188 
L 144.238946 180.265365 
L 147.313326 179.96087 
L 150.387707 179.891667 
L 153.462087 180.500657 
L 156.536467 181.16501 
L 159.610847 180.915878 
L 162.685227 178.438394 
L 165.759607 179.531809 
L 168.833988 179.55949 
L 171.908368 180.34841 
L 174.982748 180.210003 
L 178.057128 179.94703 
L 181.131508 180.223843 
L 184.205888 180.334569 
L 187.280269 181.095807 
L 190.354649 181.192692 
L 193.429029 180.929719 
L 196.503409 180.528339 
L 199.577789 179.974711 
L 202.652169 181.56639 
L 205.72655 179.35188 
L 208.80093 181.095807 
L 211.87531 180.569861 
L 214.94969 180.279206 
L 218.02407 178.798252 
L 221.09845 180.805152 
L 224.172831 179.268836 
L 227.247211 180.929719 
L 230.321591 181.524868 
L 233.395971 180.126959 
L 236.470351 179.711738 
L 239.544731 179.324199 
L 242.619112 179.822463 
L 245.693492 180.694427 
L 248.767872 180.500657 
L 251.842252 179.891667 
L 254.916632 180.472976 
L 257.991012 181.137329 
L 261.065393 179.767101 
L 264.139773 180.611383 
L 267.214153 180.417613 
L 270.288533 179.324199 
L 273.362913 180.071596 
L 276.437293 180.182321 
L 279.511674 180.15464 
L 282.586054 181.081966 
L 285.660434 179.614853 
L 288.734814 180.625223 
L 291.809194 180.320728 
L 294.883574 180.943559 
L 297.957955 179.919348 
L 301.032335 179.531809 
L 304.106715 181.497187 
L 307.181095 179.739419 
L 310.255475 179.614853 
L 313.329855 180.099277 
L 316.404236 179.75326 
L 319.478616 179.988552 
L 322.552996 181.206532 
L 325.627376 179.75326 
L 328.701756 181.386461 
L 331.776136 180.403772 
L 334.850517 179.836304 
L 337.924897 179.476446 
L 340.999277 179.919348 
L 344.073657 180.472976 
L 347.148037 179.684056 
L 350.222417 178.133899 
L 353.296798 179.448765 
L 356.371178 179.725579 
L 359.445558 178.161581 
L 362.519938 179.739419 
L 365.594318 181.275736 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_17">
    <path clip-path="url(#pd02486bb43)" d="M 61.230682 214.756364 
L 64.305062 214.756364 
L 67.379442 214.756364 
L 70.453822 214.756364 
L 73.528202 214.756364 
L 76.602583 214.756364 
L 79.676963 214.756364 
L 82.751343 214.756364 
L 85.825723 214.756364 
L 88.900103 214.756364 
L 91.974483 214.756364 
L 95.048864 214.756364 
L 98.123244 214.756364 
L 101.197624 214.756364 
L 104.272004 214.756364 
L 107.346384 214.756364 
L 110.420764 214.756364 
L 113.495145 214.756364 
L 116.569525 214.756364 
L 119.643905 214.756364 
L 122.718285 214.756364 
L 125.792665 214.756364 
L 128.867045 214.756364 
L 131.941426 214.756364 
L 135.015806 214.756364 
L 138.090186 214.756364 
L 141.164566 214.756364 
L 144.238946 214.756364 
L 147.313326 214.756364 
L 150.387707 214.756364 
L 153.462087 214.756364 
L 156.536467 214.756364 
L 159.610847 214.756364 
L 162.685227 214.756364 
L 165.759607 214.756364 
L 168.833988 214.756364 
L 171.908368 214.756364 
L 174.982748 214.756364 
L 178.057128 214.756364 
L 181.131508 214.756364 
L 184.205888 214.756364 
L 187.280269 214.756364 
L 190.354649 214.756364 
L 193.429029 214.756364 
L 196.503409 214.756364 
L 199.577789 214.756364 
L 202.652169 214.756364 
L 205.72655 214.756364 
L 208.80093 214.756364 
L 211.87531 214.756364 
L 214.94969 214.756364 
L 218.02407 214.756364 
L 221.09845 214.756364 
L 224.172831 214.756364 
L 227.247211 214.756364 
L 230.321591 214.756364 
L 233.395971 214.756364 
L 236.470351 214.756364 
L 239.544731 214.756364 
L 242.619112 214.756364 
L 245.693492 214.756364 
L 248.767872 214.756364 
L 251.842252 214.756364 
L 254.916632 214.756364 
L 257.991012 214.756364 
L 261.065393 214.756364 
L 264.139773 214.756364 
L 267.214153 214.756364 
L 270.288533 214.756364 
L 273.362913 214.756364 
L 276.437293 214.756364 
L 279.511674 214.756364 
L 282.586054 214.756364 
L 285.660434 214.756364 
L 288.734814 214.756364 
L 291.809194 214.756364 
L 294.883574 214.756364 
L 297.957955 214.756364 
L 301.032335 214.756364 
L 304.106715 214.756364 
L 307.181095 214.756364 
L 310.255475 214.756364 
L 313.329855 214.756364 
L 316.404236 214.756364 
L 319.478616 214.756364 
L 322.552996 214.756364 
L 325.627376 214.756364 
L 328.701756 214.756364 
L 331.776136 214.756364 
L 334.850517 214.756364 
L 337.924897 214.756364 
L 340.999277 214.756364 
L 344.073657 214.756364 
L 347.148037 214.756364 
L 350.222417 214.756364 
L 353.296798 214.756364 
L 356.371178 214.756364 
L 359.445558 214.756364 
L 362.519938 214.756364 
L 365.594318 214.756364 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_18">
    <path clip-path="url(#pd02486bb43)" d="M 61.230682 199.213269 
L 64.305062 184.528298 
L 67.379442 170.742971 
L 70.453822 157.27598 
L 73.528202 143.158477 
L 76.602583 129.013292 
L 79.676963 115.670868 
L 82.751343 103.850919 
L 85.825723 93.013659 
L 88.900103 80.432472 
L 91.974483 68.833974 
L 95.048864 58.481139 
L 98.123244 49.429328 
L 101.197624 41.581657 
L 104.272004 34.453702 
L 107.346384 27.477994 
L 110.420764 23.090496 
L 113.495145 19.270465 
L 116.569525 17.180521 
L 119.643905 17.083636 
L 122.718285 19.284306 
L 125.792665 23.270425 
L 128.867045 29.900115 
L 131.941426 38.882722 
L 135.015806 51.616157 
L 138.090186 53.650738 
L 141.164566 61.152392 
L 144.238946 61.152392 
L 147.313326 69.816663 
L 150.387707 69.816663 
L 153.462087 71.768201 
L 156.536467 74.56402 
L 159.610847 74.813152 
L 162.685227 80.515516 
L 165.759607 80.515516 
L 168.833988 80.515516 
L 171.908368 83.726556 
L 174.982748 83.726556 
L 178.057128 83.726556 
L 181.131508 85.581209 
L 184.205888 85.581209 
L 187.280269 85.581209 
L 190.354649 87.076003 
L 193.429029 87.076003 
L 196.503409 87.076003 
L 199.577789 87.532746 
L 202.652169 87.532746 
L 205.72655 90.079433 
L 208.80093 90.079433 
L 211.87531 90.079433 
L 214.94969 90.079433 
L 218.02407 90.61922 
L 221.09845 90.61922 
L 224.172831 90.61922 
L 227.247211 90.61922 
L 230.321591 90.61922 
L 233.395971 90.61922 
L 236.470351 90.61922 
L 239.544731 90.61922 
L 242.619112 90.61922 
L 245.693492 90.61922 
L 248.767872 90.61922 
L 251.842252 90.61922 
L 254.916632 90.61922 
L 257.991012 90.61922 
L 261.065393 90.61922 
L 264.139773 90.61922 
L 267.214153 90.61922 
L 270.288533 91.131325 
L 273.362913 91.131325 
L 276.437293 91.131325 
L 279.511674 91.131325 
L 282.586054 91.131325 
L 285.660434 91.131325 
L 288.734814 91.131325 
L 291.809194 91.131325 
L 294.883574 91.131325 
L 297.957955 91.131325 
L 301.032335 91.131325 
L 304.106715 91.131325 
L 307.181095 91.131325 
L 310.255475 91.131325 
L 313.329855 91.131325 
L 316.404236 91.131325 
L 319.478616 91.131325 
L 322.552996 91.131325 
L 325.627376 91.131325 
L 328.701756 91.131325 
L 331.776136 91.159007 
L 334.850517 91.159007 
L 337.924897 91.159007 
L 340.999277 91.159007 
L 344.073657 91.159007 
L 347.148037 91.159007 
L 350.222417 91.159007 
L 353.296798 91.159007 
L 356.371178 91.159007 
L 359.445558 91.159007 
L 362.519938 91.159007 
L 365.594318 91.159007 
" style="fill:none;stroke:#d62728;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 46.0125 224.64 
L 46.0125 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 380.8125 224.64 
L 380.8125 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 46.0125 224.64 
L 380.8125 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 46.0125 7.2 
L 380.8125 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 241.345312 74.746875 
L 373.8125 74.746875 
Q 375.8125 74.746875 375.8125 72.746875 
L 375.8125 14.2 
Q 375.8125 12.2 373.8125 12.2 
L 241.345312 12.2 
Q 239.345312 12.2 239.345312 14.2 
L 239.345312 72.746875 
Q 239.345312 74.746875 241.345312 74.746875 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_19">
     <path d="M 243.345312 20.298437 
L 263.345312 20.298437 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_20"/>
    <g id="text_16">
     <!-- pool_length -->
     <g transform="translate(271.345312 23.798437)scale(0.1 -0.1)">
      <defs>
       <path d="M 1159 525 
L 1159 -1331 
L 581 -1331 
L 581 3500 
L 1159 3500 
L 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
z
M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
" id="DejaVuSans-70" transform="scale(0.015625)"/>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
       <path d="M 2906 1791 
Q 2906 2416 2648 2759 
Q 2391 3103 1925 3103 
Q 1463 3103 1205 2759 
Q 947 2416 947 1791 
Q 947 1169 1205 825 
Q 1463 481 1925 481 
Q 2391 481 2648 825 
Q 2906 1169 2906 1791 
z
M 3481 434 
Q 3481 -459 3084 -895 
Q 2688 -1331 1869 -1331 
Q 1566 -1331 1297 -1286 
Q 1028 -1241 775 -1147 
L 775 -588 
Q 1028 -725 1275 -790 
Q 1522 -856 1778 -856 
Q 2344 -856 2625 -561 
Q 2906 -266 2906 331 
L 2906 616 
Q 2728 306 2450 153 
Q 2172 0 1784 0 
Q 1141 0 747 490 
Q 353 981 353 1791 
Q 353 2603 747 3093 
Q 1141 3584 1784 3584 
Q 2172 3584 2450 3431 
Q 2728 3278 2906 2969 
L 2906 3500 
L 3481 3500 
L 3481 434 
z
" id="DejaVuSans-67" transform="scale(0.015625)"/>
       <path d="M 1172 4494 
L 1172 3500 
L 2356 3500 
L 2356 3053 
L 1172 3053 
L 1172 1153 
Q 1172 725 1289 603 
Q 1406 481 1766 481 
L 2356 481 
L 2356 0 
L 1766 0 
Q 1100 0 847 248 
Q 594 497 594 1153 
L 594 3053 
L 172 3053 
L 172 3500 
L 594 3500 
L 594 4494 
L 1172 4494 
z
" id="DejaVuSans-74" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-68" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-70"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6f"/>
      <use x="124.658203" xlink:href="#DejaVuSans-6f"/>
      <use x="185.839844" xlink:href="#DejaVuSans-6c"/>
      <use x="213.623047" xlink:href="#DejaVuSans-5f"/>
      <use x="263.623047" xlink:href="#DejaVuSans-6c"/>
      <use x="291.40625" xlink:href="#DejaVuSans-65"/>
      <use x="352.929688" xlink:href="#DejaVuSans-6e"/>
      <use x="416.308594" xlink:href="#DejaVuSans-67"/>
      <use x="479.785156" xlink:href="#DejaVuSans-74"/>
      <use x="518.994141" xlink:href="#DejaVuSans-68"/>
     </g>
    </g>
    <g id="line2d_21">
     <path d="M 243.345312 35.254687 
L 263.345312 35.254687 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_22"/>
    <g id="text_17">
     <!-- users -->
     <g transform="translate(271.345312 38.754687)scale(0.1 -0.1)">
      <defs>
       <path d="M 544 1381 
L 544 3500 
L 1119 3500 
L 1119 1403 
Q 1119 906 1312 657 
Q 1506 409 1894 409 
Q 2359 409 2629 706 
Q 2900 1003 2900 1516 
L 2900 3500 
L 3475 3500 
L 3475 0 
L 2900 0 
L 2900 538 
Q 2691 219 2414 64 
Q 2138 -91 1772 -91 
Q 1169 -91 856 284 
Q 544 659 544 1381 
z
M 1991 3584 
L 1991 3584 
z
" id="DejaVuSans-75" transform="scale(0.015625)"/>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-75"/>
      <use x="63.378906" xlink:href="#DejaVuSans-73"/>
      <use x="115.478516" xlink:href="#DejaVuSans-65"/>
      <use x="177.001953" xlink:href="#DejaVuSans-72"/>
      <use x="218.115234" xlink:href="#DejaVuSans-73"/>
     </g>
    </g>
    <g id="line2d_23">
     <path d="M 243.345312 49.932812 
L 263.345312 49.932812 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_24"/>
    <g id="text_18">
     <!-- pool_strat_users -->
     <g transform="translate(271.345312 53.432812)scale(0.1 -0.1)">
      <defs>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-70"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6f"/>
      <use x="124.658203" xlink:href="#DejaVuSans-6f"/>
      <use x="185.839844" xlink:href="#DejaVuSans-6c"/>
      <use x="213.623047" xlink:href="#DejaVuSans-5f"/>
      <use x="263.623047" xlink:href="#DejaVuSans-73"/>
      <use x="315.722656" xlink:href="#DejaVuSans-74"/>
      <use x="354.931641" xlink:href="#DejaVuSans-72"/>
      <use x="396.044922" xlink:href="#DejaVuSans-61"/>
      <use x="457.324219" xlink:href="#DejaVuSans-74"/>
      <use x="496.533203" xlink:href="#DejaVuSans-5f"/>
      <use x="546.533203" xlink:href="#DejaVuSans-75"/>
      <use x="609.912109" xlink:href="#DejaVuSans-73"/>
      <use x="662.011719" xlink:href="#DejaVuSans-65"/>
      <use x="723.535156" xlink:href="#DejaVuSans-72"/>
      <use x="764.648438" xlink:href="#DejaVuSans-73"/>
     </g>
    </g>
    <g id="line2d_25">
     <path d="M 243.345312 64.889062 
L 263.345312 64.889062 
" style="fill:none;stroke:#d62728;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_26"/>
    <g id="text_19">
     <!-- pool_nonstrat_users -->
     <g transform="translate(271.345312 68.389062)scale(0.1 -0.1)">
      <use xlink:href="#DejaVuSans-70"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6f"/>
      <use x="124.658203" xlink:href="#DejaVuSans-6f"/>
      <use x="185.839844" xlink:href="#DejaVuSans-6c"/>
      <use x="213.623047" xlink:href="#DejaVuSans-5f"/>
      <use x="263.623047" xlink:href="#DejaVuSans-6e"/>
      <use x="327.001953" xlink:href="#DejaVuSans-6f"/>
      <use x="388.183594" xlink:href="#DejaVuSans-6e"/>
      <use x="451.5625" xlink:href="#DejaVuSans-73"/>
      <use x="503.662109" xlink:href="#DejaVuSans-74"/>
      <use x="542.871094" xlink:href="#DejaVuSans-72"/>
      <use x="583.984375" xlink:href="#DejaVuSans-61"/>
      <use x="645.263672" xlink:href="#DejaVuSans-74"/>
      <use x="684.472656" xlink:href="#DejaVuSans-5f"/>
      <use x="734.472656" xlink:href="#DejaVuSans-75"/>
      <use x="797.851562" xlink:href="#DejaVuSans-73"/>
      <use x="849.951172" xlink:href="#DejaVuSans-65"/>
      <use x="911.474609" xlink:href="#DejaVuSans-72"/>
      <use x="952.587891" xlink:href="#DejaVuSans-73"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="pd02486bb43">
   <rect height="217.44" width="334.8" x="46.0125" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We observe in the chart above the transaction pool length, and indeed confirm that most users in the pool are non-strategic. <strong>Strategic users get ahead by outbidding them</strong>.</p>
<h3 id="When-basefee-settles,-strategic-behaviour-does-not-help">When basefee settles, strategic behaviour does not help<a class="anchor-link" href="#When-basefee-settles,-strategic-behaviour-does-not-help">&#182;</a></h3><p>We'll now look at the trace more closely. We export simulation data to pandas <code>DataFrame</code>s for ease of manipulation, using the <code>export</code> methods we defined in our classes.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Obtain the pool of users (all users spawned by the simulation)</span>
<span class="n">user_pool_df</span> <span class="o">=</span> <span class="n">user_pool</span><span class="o">.</span><span class="n">export</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;pub_key&quot;</span><span class="p">:</span> <span class="s2">&quot;sender&quot;</span> <span class="p">})</span>

<span class="c1"># Export the trace of the chain, all transactions included in blocks</span>
<span class="n">chain_df</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>

<span class="c1"># Join the two to associate transactions with their senders</span>
<span class="n">user_txs_df</span> <span class="o">=</span> <span class="n">chain_df</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_pool_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;sender&quot;</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;sender&quot;</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>For now we'll only look at the distribution of strategic vs. non-strategic users in the blocks.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Obtain per user type statistics</span>
<span class="n">txs_per_user_type</span> <span class="o">=</span> <span class="n">user_txs_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="s2">&quot;user_type&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="p">{</span> <span class="s2">&quot;user_type&quot;</span><span class="p">:</span> <span class="nb">len</span> <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">level</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;user_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;user_type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="s2">&quot;strategic&quot;</span><span class="p">,</span> <span class="s2">&quot;nonstrategic&quot;</span><span class="p">]</span>

<span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;total&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">strategic</span> <span class="o">+</span> <span class="n">row</span><span class="o">.</span><span class="n">nonstrategic</span><span class="p">,</span>
    <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">)</span>
<span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;percent_strategic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">strategic</span> <span class="o">/</span> <span class="n">row</span><span class="o">.</span><span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
    <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We first check how many users in each block are strategic/non-strategic.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;strategic&quot;</span><span class="p">,</span> <span class="s2">&quot;nonstrategic&quot;</span><span class="p">,</span> <span class="s2">&quot;total&quot;</span><span class="p">])</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;AxesSubplot:xlabel=&#39;block_height&#39;&gt;</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.474375pt" version="1.1" viewBox="0 0 381.65 262.474375" width="381.65pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:04.417602</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M -0 262.474375 
L 381.65 262.474375 
L 381.65 0 
L -0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 39.65 224.64 
L 374.45 224.64 
L 374.45 7.2 
L 39.65 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="m070fea3293" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="54.868182" xlink:href="#m070fea3293" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(51.686932 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="116.355785" xlink:href="#m070fea3293" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(109.993285 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="177.843388" xlink:href="#m070fea3293" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(171.480888 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="239.330992" xlink:href="#m070fea3293" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(232.968492 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="300.818595" xlink:href="#m070fea3293" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(294.456095 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="362.306198" xlink:href="#m070fea3293" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(352.762448 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block_height -->
     <g transform="translate(175.345313 252.916562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-68" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 603 3500 
L 1178 3500 
L 1178 0 
L 603 0 
L 603 3500 
z
M 603 4863 
L 1178 4863 
L 1178 4134 
L 603 4134 
L 603 4863 
z
" id="DejaVuSans-69" transform="scale(0.015625)"/>
       <path d="M 2906 1791 
Q 2906 2416 2648 2759 
Q 2391 3103 1925 3103 
Q 1463 3103 1205 2759 
Q 947 2416 947 1791 
Q 947 1169 1205 825 
Q 1463 481 1925 481 
Q 2391 481 2648 825 
Q 2906 1169 2906 1791 
z
M 3481 434 
Q 3481 -459 3084 -895 
Q 2688 -1331 1869 -1331 
Q 1566 -1331 1297 -1286 
Q 1028 -1241 775 -1147 
L 775 -588 
Q 1028 -725 1275 -790 
Q 1522 -856 1778 -856 
Q 2344 -856 2625 -561 
Q 2906 -266 2906 331 
L 2906 616 
Q 2728 306 2450 153 
Q 2172 0 1784 0 
Q 1141 0 747 490 
Q 353 981 353 1791 
Q 353 2603 747 3093 
Q 1141 3584 1784 3584 
Q 2172 3584 2450 3431 
Q 2728 3278 2906 2969 
L 2906 3500 
L 3481 3500 
L 3481 434 
z
" id="DejaVuSans-67" transform="scale(0.015625)"/>
       <path d="M 1172 4494 
L 1172 3500 
L 2356 3500 
L 2356 3053 
L 1172 3053 
L 1172 1153 
Q 1172 725 1289 603 
Q 1406 481 1766 481 
L 2356 481 
L 2356 0 
L 1766 0 
Q 1100 0 847 248 
Q 594 497 594 1153 
L 594 3053 
L 172 3053 
L 172 3500 
L 594 3500 
L 594 4494 
L 1172 4494 
z
" id="DejaVuSans-74" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
      <use x="265.332031" xlink:href="#DejaVuSans-5f"/>
      <use x="315.332031" xlink:href="#DejaVuSans-68"/>
      <use x="378.710938" xlink:href="#DejaVuSans-65"/>
      <use x="440.234375" xlink:href="#DejaVuSans-69"/>
      <use x="468.017578" xlink:href="#DejaVuSans-67"/>
      <use x="531.494141" xlink:href="#DejaVuSans-68"/>
      <use x="594.873047" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m98358ba01c" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="214.756364"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 0 -->
      <g transform="translate(26.2875 218.555582)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="181.534057"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 200 -->
      <g transform="translate(13.5625 185.333275)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="148.311749"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 400 -->
      <g transform="translate(13.5625 152.110968)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="115.089442"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 600 -->
      <g transform="translate(13.5625 118.888661)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="81.867135"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 800 -->
      <g transform="translate(13.5625 85.666354)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="48.644828"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 1000 -->
      <g transform="translate(7.2 52.444047)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_7">
     <g id="line2d_13">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="39.65" xlink:href="#m98358ba01c" y="15.422521"/>
      </g>
     </g>
     <g id="text_14">
      <!-- 1200 -->
      <g transform="translate(7.2 19.22174)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-32"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
       <use x="190.869141" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_14">
    <path clip-path="url(#p5c8fc068f8)" d="M 54.868182 22.731429 
L 57.942562 28.046998 
L 61.016942 34.027013 
L 64.091322 35.355905 
L 67.165702 32.033675 
L 70.240083 33.362567 
L 73.314463 36.684798 
L 76.388843 44.325928 
L 79.463223 52.797617 
L 82.537603 39.176471 
L 85.611983 45.322597 
L 88.686364 56.784293 
L 91.760744 61.933751 
L 94.835124 68.412101 
L 97.909504 72.564889 
L 100.983884 72.564889 
L 104.058264 90.338824 
L 107.132645 94.3255 
L 110.207025 106.617754 
L 113.281405 111.6011 
L 116.355785 131.368373 
L 119.430165 140.83673 
L 122.504545 155.454545 
L 125.578926 172.231811 
L 128.653306 191.002414 
L 131.727686 214.756364 
L 134.802066 197.314652 
L 137.876446 202.630222 
L 140.950826 185.354622 
L 144.025207 199.307991 
L 147.099587 185.354622 
L 150.173967 184.191841 
L 153.248347 182.530726 
L 156.322727 171.899587 
L 159.397107 184.02573 
L 162.471488 181.534057 
L 165.545868 173.892926 
L 168.620248 172.730145 
L 171.694628 174.225149 
L 174.769008 167.414576 
L 177.843388 174.059037 
L 180.917769 169.574026 
L 183.992149 168.411245 
L 187.066529 173.892926 
L 190.140909 165.421238 
L 193.215289 168.743468 
L 196.289669 172.397922 
L 199.36405 168.079022 
L 202.43843 169.740138 
L 205.51281 171.899587 
L 208.58719 169.407914 
L 211.66157 167.746799 
L 214.73595 161.600672 
L 217.810331 162.099007 
L 220.884711 165.919572 
L 223.959091 168.245134 
L 227.033471 169.574026 
L 230.107851 165.421238 
L 233.182231 164.59068 
L 236.256612 161.434561 
L 239.330992 169.075691 
L 242.405372 168.411245 
L 245.479752 163.261788 
L 248.554132 165.919572 
L 251.628512 169.906249 
L 254.702893 159.939557 
L 257.777273 167.414576 
L 260.851653 169.906249 
L 263.926033 158.776776 
L 267.000413 167.912911 
L 270.074793 166.085684 
L 273.149174 165.421238 
L 276.223554 164.424568 
L 279.297934 163.926234 
L 282.372314 167.580688 
L 285.446694 163.760122 
L 288.521074 169.407914 
L 291.595455 164.922903 
L 294.669835 166.417907 
L 297.744215 167.912911 
L 300.818595 166.916241 
L 303.892975 161.102338 
L 306.967355 162.265118 
L 310.041736 166.584018 
L 313.116116 165.089015 
L 316.190496 169.241803 
L 319.264876 162.929565 
L 322.339256 164.424568 
L 325.413636 162.43123 
L 328.488017 162.43123 
L 331.562397 165.089015 
L 334.636777 165.255126 
L 337.711157 170.404584 
L 340.785537 162.763453 
L 343.859917 165.421238 
L 346.934298 167.248464 
L 350.008678 168.743468 
L 353.083058 159.939557 
L 356.157438 167.746799 
L 359.231818 167.082353 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_15">
    <path clip-path="url(#p5c8fc068f8)" d="M 54.868182 209.108571 
L 57.942562 203.793002 
L 61.016942 197.812987 
L 64.091322 196.484095 
L 67.165702 199.806325 
L 70.240083 198.477433 
L 73.314463 195.155202 
L 76.388843 187.514072 
L 79.463223 179.042383 
L 82.537603 192.663529 
L 85.611983 186.517403 
L 88.686364 175.055707 
L 91.760744 169.906249 
L 94.835124 163.427899 
L 97.909504 159.275111 
L 100.983884 159.275111 
L 104.058264 141.501176 
L 107.132645 137.5145 
L 110.207025 125.222246 
L 113.281405 120.2389 
L 116.355785 100.471627 
L 119.430165 91.00327 
L 122.504545 76.385455 
L 125.578926 59.608189 
L 128.653306 40.837586 
L 131.727686 189.673522 
L 134.802066 107.946646 
L 137.876446 202.297998 
L 140.950826 81.202689 
L 144.025207 199.141879 
L 147.099587 158.942888 
L 150.173967 146.982857 
L 153.248347 176.55071 
L 156.322727 103.959969 
L 159.397107 186.18518 
L 162.471488 178.045714 
L 165.545868 135.35505 
L 168.620248 176.218487 
L 171.694628 167.248464 
L 174.769008 145.820076 
L 177.843388 170.736807 
L 180.917769 172.065699 
L 183.992149 147.813415 
L 187.066529 169.906249 
L 190.140909 168.245134 
L 193.215289 160.604003 
L 196.289669 172.065699 
L 199.36405 135.687273 
L 202.43843 174.059037 
L 205.51281 171.06903 
L 208.58719 164.59068 
L 211.66157 155.454545 
L 214.73595 165.587349 
L 217.810331 160.936226 
L 220.884711 169.407914 
L 223.959091 170.902918 
L 227.033471 160.604003 
L 230.107851 165.089015 
L 233.182231 163.926234 
L 236.256612 165.255126 
L 239.330992 163.760122 
L 242.405372 165.587349 
L 245.479752 165.753461 
L 248.554132 163.095676 
L 251.628512 166.75013 
L 254.702893 167.580688 
L 257.777273 169.574026 
L 260.851653 163.261788 
L 263.926033 158.610665 
L 267.000413 164.258457 
L 270.074793 168.411245 
L 273.149174 166.417907 
L 276.223554 165.255126 
L 279.297934 164.258457 
L 282.372314 164.922903 
L 285.446694 165.421238 
L 288.521074 167.580688 
L 291.595455 163.427899 
L 294.669835 163.926234 
L 297.744215 166.417907 
L 300.818595 164.59068 
L 303.892975 163.261788 
L 306.967355 163.594011 
L 310.041736 173.062368 
L 313.116116 161.434561 
L 316.190496 164.922903 
L 319.264876 169.241803 
L 322.339256 168.411245 
L 325.413636 165.089015 
L 328.488017 163.594011 
L 331.562397 163.261788 
L 334.636777 165.089015 
L 337.711157 166.085684 
L 340.785537 159.773445 
L 343.859917 161.268449 
L 346.934298 164.59068 
L 350.008678 166.916241 
L 353.083058 168.411245 
L 356.157438 163.926234 
L 359.231818 170.570695 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_16">
    <path clip-path="url(#p5c8fc068f8)" d="M 54.868182 17.083636 
L 57.942562 17.083636 
L 61.016942 17.083636 
L 64.091322 17.083636 
L 67.165702 17.083636 
L 70.240083 17.083636 
L 73.314463 17.083636 
L 76.388843 17.083636 
L 79.463223 17.083636 
L 82.537603 17.083636 
L 85.611983 17.083636 
L 88.686364 17.083636 
L 91.760744 17.083636 
L 94.835124 17.083636 
L 97.909504 17.083636 
L 100.983884 17.083636 
L 104.058264 17.083636 
L 107.132645 17.083636 
L 110.207025 17.083636 
L 113.281405 17.083636 
L 116.355785 17.083636 
L 119.430165 17.083636 
L 122.504545 17.083636 
L 125.578926 17.083636 
L 128.653306 17.083636 
L 131.727686 189.673522 
L 134.802066 90.504935 
L 137.876446 190.171856 
L 140.950826 51.800947 
L 144.025207 183.693506 
L 147.099587 129.541146 
L 150.173967 116.418335 
L 153.248347 144.325073 
L 156.322727 61.103193 
L 159.397107 155.454545 
L 162.471488 144.823407 
L 165.545868 94.491612 
L 168.620248 134.192269 
L 171.694628 126.71725 
L 174.769008 98.478289 
L 177.843388 130.039481 
L 180.917769 126.883361 
L 183.992149 101.468296 
L 187.066529 129.042811 
L 190.140909 118.910008 
L 193.215289 114.591108 
L 196.289669 129.707257 
L 199.36405 89.009931 
L 202.43843 129.042811 
L 205.51281 128.212254 
L 208.58719 119.242231 
L 211.66157 108.444981 
L 214.73595 112.431658 
L 217.810331 108.278869 
L 220.884711 120.571123 
L 223.959091 124.391688 
L 227.033471 115.421665 
L 230.107851 115.753888 
L 233.182231 113.76055 
L 236.256612 111.933323 
L 239.330992 118.07945 
L 242.405372 119.242231 
L 245.479752 114.258885 
L 248.554132 114.258885 
L 251.628512 121.900015 
L 254.702893 112.763881 
L 257.777273 122.232238 
L 260.851653 118.411673 
L 263.926033 102.631077 
L 267.000413 117.415004 
L 270.074793 119.740565 
L 273.149174 117.082781 
L 276.223554 114.923331 
L 279.297934 113.428327 
L 282.372314 117.747227 
L 285.446694 114.424996 
L 288.521074 122.232238 
L 291.595455 113.594439 
L 294.669835 115.587777 
L 297.744215 119.574454 
L 300.818595 116.750558 
L 303.892975 109.607762 
L 306.967355 111.102765 
L 310.041736 124.890023 
L 313.116116 111.767212 
L 316.190496 119.408342 
L 319.264876 117.415004 
L 322.339256 118.07945 
L 325.413636 112.763881 
L 328.488017 111.268877 
L 331.562397 113.594439 
L 334.636777 115.587777 
L 337.711157 121.733904 
L 340.785537 107.780535 
L 343.859917 111.933323 
L 346.934298 117.082781 
L 350.008678 120.903346 
L 353.083058 113.594439 
L 356.157438 116.916669 
L 359.231818 122.896684 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 39.65 224.64 
L 39.65 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 374.45 224.64 
L 374.45 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 39.65 224.64 
L 374.45 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 39.65 7.2 
L 374.45 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 272.589063 59.234375 
L 367.45 59.234375 
Q 369.45 59.234375 369.45 57.234375 
L 369.45 14.2 
Q 369.45 12.2 367.45 12.2 
L 272.589063 12.2 
Q 270.589063 12.2 270.589063 14.2 
L 270.589063 57.234375 
Q 270.589063 59.234375 272.589063 59.234375 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_17">
     <path d="M 274.589063 20.298438 
L 294.589063 20.298438 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_18"/>
    <g id="text_15">
     <!-- strategic -->
     <g transform="translate(302.589063 23.798438)scale(0.1 -0.1)">
      <defs>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-73"/>
      <use x="52.099609" xlink:href="#DejaVuSans-74"/>
      <use x="91.308594" xlink:href="#DejaVuSans-72"/>
      <use x="132.421875" xlink:href="#DejaVuSans-61"/>
      <use x="193.701172" xlink:href="#DejaVuSans-74"/>
      <use x="232.910156" xlink:href="#DejaVuSans-65"/>
      <use x="294.433594" xlink:href="#DejaVuSans-67"/>
      <use x="357.910156" xlink:href="#DejaVuSans-69"/>
      <use x="385.693359" xlink:href="#DejaVuSans-63"/>
     </g>
    </g>
    <g id="line2d_19">
     <path d="M 274.589063 34.976563 
L 294.589063 34.976563 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_20"/>
    <g id="text_16">
     <!-- nonstrategic -->
     <g transform="translate(302.589063 38.476563)scale(0.1 -0.1)">
      <defs>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-6e"/>
      <use x="63.378906" xlink:href="#DejaVuSans-6f"/>
      <use x="124.560547" xlink:href="#DejaVuSans-6e"/>
      <use x="187.939453" xlink:href="#DejaVuSans-73"/>
      <use x="240.039062" xlink:href="#DejaVuSans-74"/>
      <use x="279.248047" xlink:href="#DejaVuSans-72"/>
      <use x="320.361328" xlink:href="#DejaVuSans-61"/>
      <use x="381.640625" xlink:href="#DejaVuSans-74"/>
      <use x="420.849609" xlink:href="#DejaVuSans-65"/>
      <use x="482.373047" xlink:href="#DejaVuSans-67"/>
      <use x="545.849609" xlink:href="#DejaVuSans-69"/>
      <use x="573.632812" xlink:href="#DejaVuSans-63"/>
     </g>
    </g>
    <g id="line2d_21">
     <path d="M 274.589063 49.654688 
L 294.589063 49.654688 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_22"/>
    <g id="text_17">
     <!-- total -->
     <g transform="translate(302.589063 53.154688)scale(0.1 -0.1)">
      <use xlink:href="#DejaVuSans-74"/>
      <use x="39.208984" xlink:href="#DejaVuSans-6f"/>
      <use x="100.390625" xlink:href="#DejaVuSans-74"/>
      <use x="139.599609" xlink:href="#DejaVuSans-61"/>
      <use x="200.878906" xlink:href="#DejaVuSans-6c"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="p5c8fc068f8">
   <rect height="217.44" width="334.8" x="39.65" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>From this plot, a few observations stand out:</p>
<ol>
<li>For the first few blocks, only strategic users are included.</li>
<li>This changes before the basefee reaches its apex (at block 26), as more and more non-strategic users are included. By block 20, more non-strategic users are included than strategic.</li>
<li>There are weird sawtooths between blocks 25 and 50. I don't believe these have much interpretation, having more to do with discontinuous behaviour of the simulation. When the basefee drops by a small amount, some users in the pool are included, sometimes enough for the basefee to increase again, after which most users cannot get in. This keeps on going until all users left in the pool have a fee cap lower than the stationary basefee level.</li>
<li>Once series stabilise, we observe that strategic and non-strategic users get in at equal ratio. Remember that we spawn equal numbers of strategic and non-strategic users each round, so we may conclude here that strategic users lost their overbidding advantage: at this point, the basefee is more determinant to decide who gets in or not.</li>
</ol>
<p>This is confirmed by the following plot, which shows the percentage of strategic users in each block.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="s2">&quot;percent_strategic&quot;</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;AxesSubplot:xlabel=&#39;block_height&#39;&gt;</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.474375pt" version="1.1" viewBox="0 0 375.2875 262.474375" width="375.2875pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:04.573826</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M 0 262.474375 
L 375.2875 262.474375 
L 375.2875 0 
L 0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 33.2875 224.64 
L 368.0875 224.64 
L 368.0875 7.2 
L 33.2875 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="m7e2e34361e" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="48.505682" xlink:href="#m7e2e34361e" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(45.324432 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="109.993285" xlink:href="#m7e2e34361e" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(103.630785 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="171.480888" xlink:href="#m7e2e34361e" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(165.118388 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="232.968492" xlink:href="#m7e2e34361e" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(226.605992 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="294.456095" xlink:href="#m7e2e34361e" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(288.093595 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="355.943698" xlink:href="#m7e2e34361e" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(346.399948 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block_height -->
     <g transform="translate(168.982812 252.916562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-68" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 603 3500 
L 1178 3500 
L 1178 0 
L 603 0 
L 603 3500 
z
M 603 4863 
L 1178 4863 
L 1178 4134 
L 603 4134 
L 603 4863 
z
" id="DejaVuSans-69" transform="scale(0.015625)"/>
       <path d="M 2906 1791 
Q 2906 2416 2648 2759 
Q 2391 3103 1925 3103 
Q 1463 3103 1205 2759 
Q 947 2416 947 1791 
Q 947 1169 1205 825 
Q 1463 481 1925 481 
Q 2391 481 2648 825 
Q 2906 1169 2906 1791 
z
M 3481 434 
Q 3481 -459 3084 -895 
Q 2688 -1331 1869 -1331 
Q 1566 -1331 1297 -1286 
Q 1028 -1241 775 -1147 
L 775 -588 
Q 1028 -725 1275 -790 
Q 1522 -856 1778 -856 
Q 2344 -856 2625 -561 
Q 2906 -266 2906 331 
L 2906 616 
Q 2728 306 2450 153 
Q 2172 0 1784 0 
Q 1141 0 747 490 
Q 353 981 353 1791 
Q 353 2603 747 3093 
Q 1141 3584 1784 3584 
Q 2172 3584 2450 3431 
Q 2728 3278 2906 2969 
L 2906 3500 
L 3481 3500 
L 3481 434 
z
" id="DejaVuSans-67" transform="scale(0.015625)"/>
       <path d="M 1172 4494 
L 1172 3500 
L 2356 3500 
L 2356 3053 
L 1172 3053 
L 1172 1153 
Q 1172 725 1289 603 
Q 1406 481 1766 481 
L 2356 481 
L 2356 0 
L 1766 0 
Q 1100 0 847 248 
Q 594 497 594 1153 
L 594 3053 
L 172 3053 
L 172 3500 
L 594 3500 
L 594 4494 
L 1172 4494 
z
" id="DejaVuSans-74" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
      <use x="265.332031" xlink:href="#DejaVuSans-5f"/>
      <use x="315.332031" xlink:href="#DejaVuSans-68"/>
      <use x="378.710938" xlink:href="#DejaVuSans-65"/>
      <use x="440.234375" xlink:href="#DejaVuSans-69"/>
      <use x="468.017578" xlink:href="#DejaVuSans-67"/>
      <use x="531.494141" xlink:href="#DejaVuSans-68"/>
      <use x="594.873047" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m48f175c9c1" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="33.2875" xlink:href="#m48f175c9c1" y="214.756364"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 0 -->
      <g transform="translate(19.925 218.555582)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="33.2875" xlink:href="#m48f175c9c1" y="174.059037"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 20 -->
      <g transform="translate(13.5625 177.858256)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="33.2875" xlink:href="#m48f175c9c1" y="133.361711"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 40 -->
      <g transform="translate(13.5625 137.16093)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="33.2875" xlink:href="#m48f175c9c1" y="92.664385"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 60 -->
      <g transform="translate(13.5625 96.463604)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="33.2875" xlink:href="#m48f175c9c1" y="51.967059"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 80 -->
      <g transform="translate(13.5625 55.766278)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="33.2875" xlink:href="#m48f175c9c1" y="11.269733"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 100 -->
      <g transform="translate(7.2 15.068951)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_13">
    <path clip-path="url(#p59bff35a6b)" d="M 48.505682 17.083636 
L 51.580062 22.555546 
L 54.654442 28.711444 
L 57.728822 30.079421 
L 60.803202 26.659478 
L 63.877583 28.027455 
L 66.951963 31.447399 
L 70.026343 39.313268 
L 73.100723 48.034124 
L 76.175103 34.012356 
L 79.249483 40.339251 
L 82.323864 52.138056 
L 85.398244 57.438968 
L 88.472624 64.107858 
L 91.547004 68.382787 
L 94.621384 68.382787 
L 97.695764 86.679484 
L 100.770145 90.783416 
L 103.844525 103.437207 
L 106.918905 108.567122 
L 109.993285 128.915785 
L 113.067665 138.662623 
L 116.142045 153.710374 
L 119.216426 170.981088 
L 122.290806 190.303768 
L 125.365186 214.756364 
L 128.439566 186.192064 
L 131.513946 114.387958 
L 134.588326 178.04165 
L 137.662707 113.55713 
L 140.737087 144.547526 
L 143.811467 151.510519 
L 146.885847 121.651632 
L 149.960227 158.000092 
L 153.034607 109.308109 
L 156.108988 118.08813 
L 159.183368 145.615879 
L 162.257748 108.607667 
L 165.332128 121.075726 
L 168.406508 131.908235 
L 171.480888 117.002982 
L 174.555269 110.128077 
L 177.629649 131.511833 
L 180.704029 117.745295 
L 183.778409 110.015411 
L 186.852789 121.280747 
L 189.927169 113.410483 
L 193.00155 139.221696 
L 196.07593 107.886447 
L 199.15031 113.989472 
L 202.22469 118.14445 
L 205.29907 124.777119 
L 208.37345 109.049023 
L 211.447831 114.12413 
L 214.522211 109.244777 
L 217.596591 110.020598 
L 220.670971 122.200572 
L 223.745351 113.354469 
L 226.819731 113.682412 
L 229.894112 109.232602 
L 232.968492 118.607182 
L 236.042872 116.021111 
L 239.117252 110.490487 
L 242.191632 115.871951 
L 245.266012 116.471229 
L 248.340393 105.390585 
L 251.414773 110.638429 
L 254.489153 120.029829 
L 257.563533 113.163779 
L 260.637913 116.832763 
L 263.712293 110.522827 
L 266.786674 111.974851 
L 269.861054 112.166598 
L 272.935434 112.679463 
L 276.009814 115.800536 
L 279.084194 111.328556 
L 282.158574 115.022342 
L 285.232955 114.516644 
L 288.307335 115.569413 
L 291.381715 114.611111 
L 294.456095 115.427296 
L 297.530475 110.923533 
L 300.604855 111.708647 
L 303.679236 105.678502 
L 306.753616 116.623295 
L 309.827996 117.62163 
L 312.902376 106.415359 
L 315.976756 108.817447 
L 319.051136 110.361757 
L 322.125517 111.869865 
L 325.199897 114.850776 
L 328.274277 113.183472 
L 331.348657 117.736845 
L 334.423037 115.856805 
L 337.497417 117.122229 
L 340.571798 115.781574 
L 343.646178 114.993891 
L 346.720558 104.492672 
L 349.794938 116.986047 
L 352.869318 109.149378 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 33.2875 224.64 
L 33.2875 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 368.0875 224.64 
L 368.0875 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 33.2875 224.64 
L 368.0875 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 33.2875 7.2 
L 368.0875 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 241.723438 30.15625 
L 361.0875 30.15625 
Q 363.0875 30.15625 363.0875 28.15625 
L 363.0875 14.2 
Q 363.0875 12.2 361.0875 12.2 
L 241.723438 12.2 
Q 239.723438 12.2 239.723438 14.2 
L 239.723438 28.15625 
Q 239.723438 30.15625 241.723438 30.15625 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_14">
     <path d="M 243.723438 20.298438 
L 263.723438 20.298438 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_15"/>
    <g id="text_14">
     <!-- percent_strategic -->
     <g transform="translate(271.723438 23.798438)scale(0.1 -0.1)">
      <defs>
       <path d="M 1159 525 
L 1159 -1331 
L 581 -1331 
L 581 3500 
L 1159 3500 
L 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
z
M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
" id="DejaVuSans-70" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-70"/>
      <use x="63.476562" xlink:href="#DejaVuSans-65"/>
      <use x="125" xlink:href="#DejaVuSans-72"/>
      <use x="163.863281" xlink:href="#DejaVuSans-63"/>
      <use x="218.84375" xlink:href="#DejaVuSans-65"/>
      <use x="280.367188" xlink:href="#DejaVuSans-6e"/>
      <use x="343.746094" xlink:href="#DejaVuSans-74"/>
      <use x="382.955078" xlink:href="#DejaVuSans-5f"/>
      <use x="432.955078" xlink:href="#DejaVuSans-73"/>
      <use x="485.054688" xlink:href="#DejaVuSans-74"/>
      <use x="524.263672" xlink:href="#DejaVuSans-72"/>
      <use x="565.376953" xlink:href="#DejaVuSans-61"/>
      <use x="626.65625" xlink:href="#DejaVuSans-74"/>
      <use x="665.865234" xlink:href="#DejaVuSans-65"/>
      <use x="727.388672" xlink:href="#DejaVuSans-67"/>
      <use x="790.865234" xlink:href="#DejaVuSans-69"/>
      <use x="818.648438" xlink:href="#DejaVuSans-63"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="p59bff35a6b">
   <rect height="217.44" width="334.8" x="33.2875" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <h3 id="Piecing-parts-together">Piecing parts together<a class="anchor-link" href="#Piecing-parts-together">&#182;</a></h3><p>In the chart above, between blocks 0 and 26, before basefee reaches its apex, strategic users are included in much higher proportions than non-strategic users. Not surprising, since they post higher premiums. More surprising however is that this proportion is decreasing, until it is reversed: by block 20, more non-strategic users are included than strategic.</p>
<p>This is trickier to explain but we can sketch the following narrative.</p>
<ol>
<li>Most users, both strategic and non-strategic, have valid transactions (for which the cap is above the basefee) to send. Strategic users get in first and take all the slots.</li>
<li>Users start being discriminated by the basefee. Strategic users with valid transactions get in, some non-strategic users get in too.</li>
<li>Basefee keeps increasing. <em>High-valued</em> non-strategic users which were languishing in the pool start filling the block, while most new, <em>low-valued</em> strategic users are priced out.</li>
<li>Basefee hits highest level. No one gets in.</li>
<li>Basefee starts decreasing. Valid leftovers in the pool (almost all of them non-strategic) are included with some of the new users.</li>
<li>Basefee stabilises. Only new users are included, no one in the pool is valid anymore.</li>
</ol>
<p>It is expected to find this instability during transitionary periods, where the basefee needs to adapt to a changing demand, e.g., a spike in transactions or higher values for transacting. We find however that once the basefee settles, strategic users no longer have the edge over nonstrategic ones: the basefee is the true determinant for inclusion.</p>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <h2 id="Value-bidding">Value bidding<a class="anchor-link" href="#Value-bidding">&#182;</a></h2><p>In this section, we change the bidding behaviour once more. Previously, we looked at <code>OptimisticUser</code>s who set their gas premium to 1 Gwei, a small, fixed value meant to compensate miner work, or <code>StrategicUser</code>s who overbid when blocks are full. With EIP 1559 implemented, it is reasonable to believe most users would follow this simple bidding strategy: look at the gasprice level (the current basefee plus this 1 Gwei premium) and decide sending their transaction or not, sometimes adjusting the premium when congestion spikes.</p>
<p>We'll relax this assumption however, and look at the case where users <strong>set their premium according to their value for the transaction</strong>: the higher their value, the greater the premium.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">OptimisticUser</span><span class="p">(</span><span class="n">User1559</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">expected_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">decide_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="c1"># Users add a fraction of their value to their premium</span>
        <span class="c1"># Higher value users thus have higher premiums, all else equal</span>
        <span class="n">gas_premium</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="mi">1000</span>
        <span class="n">max_fee</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;max_fee&quot;</span><span class="p">:</span> <span class="n">max_fee</span><span class="p">,</span>
            <span class="s2">&quot;gas_premium&quot;</span><span class="p">:</span> <span class="n">gas_premium</span><span class="p">,</span> <span class="c1"># in wei</span>
            <span class="s2">&quot;start_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wakeup_block</span><span class="p">,</span>
        <span class="p">}</span>
    
<span class="k">class</span> <span class="nc">StrategicUser</span><span class="p">(</span><span class="n">User1559</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A strategic affine user sending 1559 transactions.</span>
<span class="sd">    </span>
<span class="sd">    - Expects to be included in the next block</span>
<span class="sd">    - Prefers not to participate if its expected payoff is negative</span>
<span class="sd">    - Strategic gas_premium</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># how much the user overbids by</span>

    <span class="k">def</span> <span class="nf">expected_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">decide_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;min_premium&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">min_premium</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">min_premium</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;min_premium&quot;</span><span class="p">]</span>

        <span class="n">gas_premium</span> <span class="o">=</span> <span class="n">min_premium</span>  <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="mi">1000</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsilon</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">)</span>
        <span class="n">max_fee</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;max_fee&quot;</span><span class="p">:</span> <span class="n">max_fee</span><span class="p">,</span> <span class="c1"># in wei</span>
            <span class="s2">&quot;gas_premium&quot;</span><span class="p">:</span> <span class="n">gas_premium</span><span class="p">,</span> <span class="c1"># in wei</span>
            <span class="s2">&quot;start_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wakeup_block</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">export</span><span class="p">(),</span>
            <span class="s2">&quot;user_type&quot;</span><span class="p">:</span> <span class="s2">&quot;strategic_user_1559&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;1559 strategic affine user with value </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> and cost </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cost_per_unit</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>Run the simulation again.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">strategic_share</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">shares_scenario</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="n">StrategicUser</span><span class="p">:</span> <span class="n">strategic_share</span><span class="p">,</span>
    <span class="n">OptimisticUser</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">strategic_share</span><span class="p">,</span>
<span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">blocks</span><span class="p">)]</span>

<span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">user_pool</span><span class="p">,</span> <span class="n">chain</span><span class="p">)</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="n">demand_scenario</span><span class="p">,</span> <span class="n">shares_scenario</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>


<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr">
<pre>100%|██████████| 100/100 [00:12&lt;00:00,  7.79it/s]
</pre>
</div>
</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>Basefee and minimum premiums have similar dynamics.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;basefee&quot;</span><span class="p">,</span> <span class="s2">&quot;blk_min_premium&quot;</span><span class="p">])</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;AxesSubplot:xlabel=&#39;block&#39;&gt;</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.19625pt" version="1.1" viewBox="0 0 368.925 262.19625" width="368.925pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:17.563225</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M -0 262.19625 
L 368.925 262.19625 
L 368.925 0 
L -0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 26.925 224.64 
L 361.725 224.64 
L 361.725 7.2 
L 26.925 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="mc804c23a43" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="42.143182" xlink:href="#mc804c23a43" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(38.961932 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="103.630785" xlink:href="#mc804c23a43" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(97.268285 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="165.118388" xlink:href="#mc804c23a43" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(158.755888 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="226.605992" xlink:href="#mc804c23a43" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(220.243492 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="288.093595" xlink:href="#mc804c23a43" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(281.731095 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="349.581198" xlink:href="#mc804c23a43" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(340.037448 239.238437)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block -->
     <g transform="translate(181.057813 252.916562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m9af415bb5d" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="200.62046"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 2 -->
      <g transform="translate(13.5625 204.419679)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-32"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="172.348654"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 4 -->
      <g transform="translate(13.5625 176.147872)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-34"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="144.076847"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 6 -->
      <g transform="translate(13.5625 147.876066)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-36"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="115.80504"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 8 -->
      <g transform="translate(13.5625 119.604259)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-38"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="87.533233"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 10 -->
      <g transform="translate(7.2 91.332452)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="59.261427"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 12 -->
      <g transform="translate(7.2 63.060645)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-32"/>
      </g>
     </g>
    </g>
    <g id="ytick_7">
     <g id="line2d_13">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m9af415bb5d" y="30.98962"/>
      </g>
     </g>
     <g id="text_14">
      <!-- 14 -->
      <g transform="translate(7.2 34.788839)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-34"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_14">
    <path clip-path="url(#pc68d4d40b5)" d="M 42.143182 214.756364 
L 45.217562 212.990789 
L 48.291942 211.004695 
L 51.366322 208.770537 
L 54.440702 206.257333 
L 57.515083 203.43023 
L 60.589463 200.250021 
L 63.663843 196.672605 
L 66.738223 192.648369 
L 69.812603 188.121506 
L 72.886983 183.029238 
L 75.961364 177.300946 
L 79.035744 170.85719 
L 82.110124 163.608608 
L 85.184504 155.454679 
L 88.258884 146.282325 
L 91.333264 135.964343 
L 94.407645 124.357645 
L 97.482025 111.301271 
L 100.556405 96.614156 
L 103.630785 80.09262 
L 106.705165 61.507544 
L 109.779545 40.601192 
L 112.853926 17.083636 
L 115.928306 20.029894 
L 119.002686 21.838643 
L 122.077066 17.979163 
L 125.151446 22.153133 
L 128.225826 23.248851 
L 131.300207 19.631583 
L 134.374587 23.772852 
L 137.448967 22.577006 
L 140.523347 25.23022 
L 143.597727 19.765967 
L 146.672107 23.114079 
L 149.746488 25.371466 
L 152.820868 26.19369 
L 155.895248 24.160623 
L 158.969628 26.363536 
L 162.044008 27.09669 
L 165.118388 21.8944 
L 168.192769 25.643131 
L 171.267149 25.695976 
L 174.341529 27.199629 
L 177.415909 27.463846 
L 180.490289 27.220118 
L 183.564669 28.28898 
L 186.63905 25.308015 
L 189.71343 27.669592 
L 192.78781 26.834518 
L 195.86219 27.82056 
L 198.93657 26.986113 
L 202.01095 28.861821 
L 205.085331 26.729496 
L 208.159711 27.249055 
L 211.234091 26.835686 
L 214.308471 27.906586 
L 217.382851 28.54974 
L 220.457231 29.653627 
L 223.531612 26.4419 
L 226.605992 27.302314 
L 229.680372 28.24374 
L 232.754752 28.295908 
L 235.829132 28.348063 
L 238.903512 27.936948 
L 241.977893 27.398387 
L 245.052273 27.239207 
L 248.126653 29.112564 
L 251.201033 27.444404 
L 254.275413 30.584976 
L 257.349793 28.637598 
L 260.424174 29.152253 
L 263.498554 29.539748 
L 266.572934 30.470725 
L 269.647314 30.06396 
L 272.721694 27.735681 
L 275.796074 27.492281 
L 278.870455 27.290881 
L 281.944835 27.851333 
L 285.019215 26.890358 
L 288.093595 26.348993 
L 291.167975 28.273154 
L 294.242355 29.210045 
L 297.316736 30.729627 
L 300.391116 30.032094 
L 303.465496 31.461899 
L 306.539876 26.662367 
L 309.614256 27.988995 
L 312.688636 28.505316 
L 315.763017 29.062392 
L 318.837397 27.309884 
L 321.911777 26.092326 
L 324.986157 27.08199 
L 328.060537 26.202097 
L 331.134917 27.361485 
L 334.209298 28.175669 
L 337.283678 27.848501 
L 340.358058 28.57628 
L 343.432438 27.9553 
L 346.506818 26.404067 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_15">
    <path clip-path="url(#pc68d4d40b5)" d="M 42.143182 214.495119 
L 45.217562 214.497452 
L 48.291942 214.495494 
L 51.366322 214.488402 
L 54.440702 214.489696 
L 57.515083 214.496516 
L 60.589463 214.498146 
L 63.663843 214.499071 
L 66.738223 214.502151 
L 69.812603 214.50327 
L 72.886983 214.505533 
L 75.961364 214.507212 
L 79.035744 214.508713 
L 82.110124 214.510604 
L 85.184504 214.513935 
L 88.258884 214.516618 
L 91.333264 214.519749 
L 94.407645 214.523044 
L 97.482025 214.527487 
L 100.556405 214.531749 
L 103.630785 214.536078 
L 106.705165 214.541179 
L 109.779545 214.547036 
L 112.853926 214.529747 
L 115.928306 214.547487 
L 119.002686 214.5493 
L 122.077066 214.530822 
L 125.151446 214.549622 
L 128.225826 214.550719 
L 131.300207 214.532279 
L 134.374587 214.551226 
L 137.448967 214.535253 
L 140.523347 214.552689 
L 143.597727 214.53276 
L 146.672107 214.536029 
L 149.746488 214.552789 
L 152.820868 214.55363 
L 155.895248 214.536993 
L 158.969628 214.553832 
L 162.044008 214.554538 
L 165.118388 214.534834 
L 168.192769 214.538396 
L 171.267149 214.538607 
L 174.341529 214.554664 
L 177.415909 214.554919 
L 180.490289 214.540326 
L 183.564669 214.555751 
L 186.63905 214.538302 
L 189.71343 214.540757 
L 192.78781 214.539432 
L 195.86219 214.540749 
L 198.93657 214.540073 
L 202.01095 214.556325 
L 205.085331 214.539073 
L 208.159711 214.540354 
L 211.234091 214.53984 
L 214.308471 214.540958 
L 217.382851 214.541586 
L 220.457231 214.557125 
L 223.531612 214.539473 
L 226.605992 214.540408 
L 229.680372 214.541211 
L 232.754752 214.540853 
L 235.829132 214.541057 
L 238.903512 214.540945 
L 241.977893 214.540141 
L 245.052273 214.539934 
L 248.126653 214.541706 
L 251.201033 214.540474 
L 254.275413 214.558033 
L 257.349793 214.541341 
L 260.424174 214.541381 
L 263.498554 214.542592 
L 266.572934 214.543534 
L 269.647314 214.542898 
L 272.721694 214.540838 
L 275.796074 214.540587 
L 278.870455 214.540174 
L 281.944835 214.540888 
L 285.019215 214.540006 
L 288.093595 214.539255 
L 291.167975 214.54093 
L 294.242355 214.541732 
L 297.316736 214.558197 
L 300.391116 214.542706 
L 303.465496 214.558928 
L 306.539876 214.539688 
L 309.614256 214.541004 
L 312.688636 214.541518 
L 315.763017 214.542003 
L 318.837397 214.540302 
L 321.911777 214.538533 
L 324.986157 214.540161 
L 328.060537 214.539259 
L 331.134917 214.539536 
L 334.209298 214.541177 
L 337.283678 214.540596 
L 340.358058 214.541359 
L 343.432438 214.540894 
L 346.506818 214.539375 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 26.925 224.64 
L 26.925 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 361.725 224.64 
L 361.725 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 26.925 224.64 
L 361.725 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 26.925 7.2 
L 361.725 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 233.967188 132.237187 
L 354.725 132.237187 
Q 356.725 132.237187 356.725 130.237187 
L 356.725 101.602812 
Q 356.725 99.602812 354.725 99.602812 
L 233.967188 99.602812 
Q 231.967188 99.602812 231.967188 101.602812 
L 231.967188 130.237187 
Q 231.967188 132.237187 233.967188 132.237187 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_16">
     <path d="M 235.967188 107.70125 
L 255.967188 107.70125 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_17"/>
    <g id="text_15">
     <!-- basefee -->
     <g transform="translate(263.967188 111.20125)scale(0.1 -0.1)">
      <defs>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 2375 4863 
L 2375 4384 
L 1825 4384 
Q 1516 4384 1395 4259 
Q 1275 4134 1275 3809 
L 1275 3500 
L 2222 3500 
L 2222 3053 
L 1275 3053 
L 1275 0 
L 697 0 
L 697 3053 
L 147 3053 
L 147 3500 
L 697 3500 
L 697 3744 
Q 697 4328 969 4595 
Q 1241 4863 1831 4863 
L 2375 4863 
z
" id="DejaVuSans-66" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-61"/>
      <use x="124.755859" xlink:href="#DejaVuSans-73"/>
      <use x="176.855469" xlink:href="#DejaVuSans-65"/>
      <use x="238.378906" xlink:href="#DejaVuSans-66"/>
      <use x="273.583984" xlink:href="#DejaVuSans-65"/>
      <use x="335.107422" xlink:href="#DejaVuSans-65"/>
     </g>
    </g>
    <g id="line2d_18">
     <path d="M 235.967188 122.379375 
L 255.967188 122.379375 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_19"/>
    <g id="text_16">
     <!-- blk_min_premium -->
     <g transform="translate(263.967188 125.879375)scale(0.1 -0.1)">
      <defs>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3328 2828 
Q 3544 3216 3844 3400 
Q 4144 3584 4550 3584 
Q 5097 3584 5394 3201 
Q 5691 2819 5691 2113 
L 5691 0 
L 5113 0 
L 5113 2094 
Q 5113 2597 4934 2840 
Q 4756 3084 4391 3084 
Q 3944 3084 3684 2787 
Q 3425 2491 3425 1978 
L 3425 0 
L 2847 0 
L 2847 2094 
Q 2847 2600 2669 2842 
Q 2491 3084 2119 3084 
Q 1678 3084 1418 2786 
Q 1159 2488 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1356 3278 1631 3431 
Q 1906 3584 2284 3584 
Q 2666 3584 2933 3390 
Q 3200 3197 3328 2828 
z
" id="DejaVuSans-6d" transform="scale(0.015625)"/>
       <path d="M 603 3500 
L 1178 3500 
L 1178 0 
L 603 0 
L 603 3500 
z
M 603 4863 
L 1178 4863 
L 1178 4134 
L 603 4134 
L 603 4863 
z
" id="DejaVuSans-69" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
       <path d="M 1159 525 
L 1159 -1331 
L 581 -1331 
L 581 3500 
L 1159 3500 
L 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
z
M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
" id="DejaVuSans-70" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
       <path d="M 544 1381 
L 544 3500 
L 1119 3500 
L 1119 1403 
Q 1119 906 1312 657 
Q 1506 409 1894 409 
Q 2359 409 2629 706 
Q 2900 1003 2900 1516 
L 2900 3500 
L 3475 3500 
L 3475 0 
L 2900 0 
L 2900 538 
Q 2691 219 2414 64 
Q 2138 -91 1772 -91 
Q 1169 -91 856 284 
Q 544 659 544 1381 
z
M 1991 3584 
L 1991 3584 
z
" id="DejaVuSans-75" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6b"/>
      <use x="149.169922" xlink:href="#DejaVuSans-5f"/>
      <use x="199.169922" xlink:href="#DejaVuSans-6d"/>
      <use x="296.582031" xlink:href="#DejaVuSans-69"/>
      <use x="324.365234" xlink:href="#DejaVuSans-6e"/>
      <use x="387.744141" xlink:href="#DejaVuSans-5f"/>
      <use x="437.744141" xlink:href="#DejaVuSans-70"/>
      <use x="501.220703" xlink:href="#DejaVuSans-72"/>
      <use x="540.083984" xlink:href="#DejaVuSans-65"/>
      <use x="601.607422" xlink:href="#DejaVuSans-6d"/>
      <use x="699.019531" xlink:href="#DejaVuSans-69"/>
      <use x="726.802734" xlink:href="#DejaVuSans-75"/>
      <use x="790.181641" xlink:href="#DejaVuSans-6d"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="pc68d4d40b5">
   <rect height="217.44" width="334.8" x="26.925" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We obtain the average value of included strategic and non-strategic users.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Obtain the pool of users (all users spawned by the simulation)</span>
<span class="n">user_pool_df</span> <span class="o">=</span> <span class="n">user_pool</span><span class="o">.</span><span class="n">export</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;pub_key&quot;</span><span class="p">:</span> <span class="s2">&quot;sender&quot;</span> <span class="p">})</span>

<span class="c1"># Export the trace of the chain, all transactions included in blocks</span>
<span class="n">chain_df</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>

<span class="c1"># Join the two to associate transactions with their senders</span>
<span class="n">user_txs_df</span> <span class="o">=</span> <span class="n">chain_df</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_pool_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;sender&quot;</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;sender&quot;</span><span class="p">)</span>

<span class="c1"># Obtain per user type statistics</span>
<span class="n">txs_per_user_type</span> <span class="o">=</span> <span class="n">user_txs_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="s2">&quot;user_type&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="p">{</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span> <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">level</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_strategic_value&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_nonstrategic_value&quot;</span><span class="p">]</span>
<span class="n">txs_per_user_type</span><span class="p">[</span><span class="s2">&quot;blk_min_premium&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;blk_min_premium&quot;</span><span class="p">]</span>

<span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;avg_strategic_value&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_nonstrategic_value&quot;</span><span class="p">,</span> <span class="s2">&quot;blk_min_premium&quot;</span><span class="p">])</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;AxesSubplot:xlabel=&#39;block_height&#39;&gt;</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.474375pt" version="1.1" viewBox="0 0 378.465625 262.474375" width="378.465625pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:19.298154</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M 0 262.474375 
L 378.465625 262.474375 
L 378.465625 0 
L 0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 36.465625 224.64 
L 371.265625 224.64 
L 371.265625 7.2 
L 36.465625 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="mbf69084794" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="51.683807" xlink:href="#mbf69084794" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(48.502557 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="113.17141" xlink:href="#mbf69084794" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(106.80891 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="174.659013" xlink:href="#mbf69084794" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(168.296513 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="236.146617" xlink:href="#mbf69084794" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(229.784117 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="297.63422" xlink:href="#mbf69084794" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(291.27172 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="359.121823" xlink:href="#mbf69084794" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(349.578073 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block_height -->
     <g transform="translate(172.160938 252.916562)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-68" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 603 3500 
L 1178 3500 
L 1178 0 
L 603 0 
L 603 3500 
z
M 603 4863 
L 1178 4863 
L 1178 4134 
L 603 4134 
L 603 4863 
z
" id="DejaVuSans-69" transform="scale(0.015625)"/>
       <path d="M 2906 1791 
Q 2906 2416 2648 2759 
Q 2391 3103 1925 3103 
Q 1463 3103 1205 2759 
Q 947 2416 947 1791 
Q 947 1169 1205 825 
Q 1463 481 1925 481 
Q 2391 481 2648 825 
Q 2906 1169 2906 1791 
z
M 3481 434 
Q 3481 -459 3084 -895 
Q 2688 -1331 1869 -1331 
Q 1566 -1331 1297 -1286 
Q 1028 -1241 775 -1147 
L 775 -588 
Q 1028 -725 1275 -790 
Q 1522 -856 1778 -856 
Q 2344 -856 2625 -561 
Q 2906 -266 2906 331 
L 2906 616 
Q 2728 306 2450 153 
Q 2172 0 1784 0 
Q 1141 0 747 490 
Q 353 981 353 1791 
Q 353 2603 747 3093 
Q 1141 3584 1784 3584 
Q 2172 3584 2450 3431 
Q 2728 3278 2906 2969 
L 2906 3500 
L 3481 3500 
L 3481 434 
z
" id="DejaVuSans-67" transform="scale(0.015625)"/>
       <path d="M 1172 4494 
L 1172 3500 
L 2356 3500 
L 2356 3053 
L 1172 3053 
L 1172 1153 
Q 1172 725 1289 603 
Q 1406 481 1766 481 
L 2356 481 
L 2356 0 
L 1766 0 
Q 1100 0 847 248 
Q 594 497 594 1153 
L 594 3053 
L 172 3053 
L 172 3500 
L 594 3500 
L 594 4494 
L 1172 4494 
z
" id="DejaVuSans-74" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
      <use x="265.332031" xlink:href="#DejaVuSans-5f"/>
      <use x="315.332031" xlink:href="#DejaVuSans-68"/>
      <use x="378.710938" xlink:href="#DejaVuSans-65"/>
      <use x="440.234375" xlink:href="#DejaVuSans-69"/>
      <use x="468.017578" xlink:href="#DejaVuSans-67"/>
      <use x="531.494141" xlink:href="#DejaVuSans-68"/>
      <use x="594.873047" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m702c102304" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="198.836458"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 2.5 -->
      <g transform="translate(13.5625 202.635677)scale(0.1 -0.1)">
       <defs>
        <path d="M 684 794 
L 1344 794 
L 1344 0 
L 684 0 
L 684 794 
z
" id="DejaVuSans-2e" transform="scale(0.015625)"/>
        <path d="M 691 4666 
L 3169 4666 
L 3169 4134 
L 1269 4134 
L 1269 2991 
Q 1406 3038 1543 3061 
Q 1681 3084 1819 3084 
Q 2600 3084 3056 2656 
Q 3513 2228 3513 1497 
Q 3513 744 3044 326 
Q 2575 -91 1722 -91 
Q 1428 -91 1123 -41 
Q 819 9 494 109 
L 494 744 
Q 775 591 1075 516 
Q 1375 441 1709 441 
Q 2250 441 2565 725 
Q 2881 1009 2881 1497 
Q 2881 1984 2565 2268 
Q 2250 2553 1709 2553 
Q 1456 2553 1204 2497 
Q 953 2441 691 2322 
L 691 4666 
z
" id="DejaVuSans-35" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-2e"/>
       <use x="95.410156" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="172.053901"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 5.0 -->
      <g transform="translate(13.5625 175.85312)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-35"/>
       <use x="63.623047" xlink:href="#DejaVuSans-2e"/>
       <use x="95.410156" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="145.271344"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 7.5 -->
      <g transform="translate(13.5625 149.070563)scale(0.1 -0.1)">
       <defs>
        <path d="M 525 4666 
L 3525 4666 
L 3525 4397 
L 1831 0 
L 1172 0 
L 2766 4134 
L 525 4134 
L 525 4666 
z
" id="DejaVuSans-37" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-37"/>
       <use x="63.623047" xlink:href="#DejaVuSans-2e"/>
       <use x="95.410156" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="118.488787"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 10.0 -->
      <g transform="translate(7.2 122.288006)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="91.70623"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 12.5 -->
      <g transform="translate(7.2 95.505449)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-32"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="64.923673"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 15.0 -->
      <g transform="translate(7.2 68.722892)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-35"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_7">
     <g id="line2d_13">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="38.141117"/>
      </g>
     </g>
     <g id="text_14">
      <!-- 17.5 -->
      <g transform="translate(7.2 41.940335)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-37"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-35"/>
      </g>
     </g>
    </g>
    <g id="ytick_8">
     <g id="line2d_14">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="36.465625" xlink:href="#m702c102304" y="11.35856"/>
      </g>
     </g>
     <g id="text_15">
      <!-- 20.0 -->
      <g transform="translate(7.2 15.157778)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-2e"/>
       <use x="159.033203" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_15">
    <path clip-path="url(#p187d14f90c)" d="M 51.683807 106.32889 
L 54.758187 105.425542 
L 57.832567 107.653519 
L 60.906947 103.303061 
L 63.981327 103.591586 
L 67.055708 100.604791 
L 70.130088 100.046469 
L 73.204468 100.269268 
L 76.278848 98.556671 
L 79.353228 98.988337 
L 82.427608 93.760246 
L 85.501989 91.461942 
L 88.576369 92.479254 
L 91.650749 88.824944 
L 94.725129 85.732694 
L 97.799509 83.150046 
L 100.873889 76.030547 
L 103.94827 73.672699 
L 107.02265 67.873249 
L 110.09703 63.133718 
L 113.17141 56.269207 
L 116.24579 48.487165 
L 119.32017 40.624886 
L 122.394551 32.031449 
L 125.468931 33.065565 
L 128.543311 34.249118 
L 131.617691 31.839953 
L 134.692071 34.358503 
L 137.766451 34.19925 
L 140.840832 32.828316 
L 143.915212 34.995633 
L 146.989592 32.633747 
L 150.063972 37.3461 
L 153.138352 33.638669 
L 156.212732 33.921987 
L 159.287113 34.411353 
L 162.361493 36.680423 
L 165.435873 34.967053 
L 168.510253 35.282903 
L 171.584633 36.070758 
L 174.659013 35.339946 
L 177.733394 36.529291 
L 180.807774 36.005071 
L 183.882154 35.064334 
L 186.956534 36.109407 
L 190.030914 34.190976 
L 193.105294 35.877242 
L 196.179675 35.165865 
L 199.254055 36.118231 
L 202.328435 35.061887 
L 205.402815 36.821633 
L 208.477195 35.352075 
L 211.551575 36.897221 
L 214.625956 36.231255 
L 217.700336 36.634836 
L 220.774716 36.304918 
L 223.849096 38.616197 
L 226.923476 36.247784 
L 229.997856 37.017218 
L 233.072237 33.32877 
L 236.146617 35.638087 
L 239.220997 36.215362 
L 242.295377 35.410353 
L 245.369757 35.012968 
L 248.444137 36.706235 
L 251.518518 37.20517 
L 254.592898 37.418384 
L 257.667278 36.888372 
L 260.741658 36.30562 
L 263.816038 37.445759 
L 266.890418 37.087993 
L 269.964799 36.63817 
L 273.039179 35.980695 
L 276.113559 37.344674 
L 279.187939 37.13731 
L 282.262319 36.479703 
L 285.336699 37.996956 
L 288.41108 35.213802 
L 291.48546 36.563513 
L 294.55984 35.779905 
L 297.63422 36.626638 
L 300.7086 35.02693 
L 303.78298 36.987395 
L 306.857361 37.398837 
L 309.931741 38.294795 
L 313.006121 37.717748 
L 316.080501 36.556134 
L 319.154881 37.372718 
L 322.229261 36.91899 
L 325.303642 37.932944 
L 328.378022 35.761007 
L 331.452402 34.896028 
L 334.526782 36.448545 
L 337.601162 34.44349 
L 340.675542 35.55521 
L 343.749923 35.987037 
L 346.824303 37.146504 
L 349.898683 37.166545 
L 352.973063 36.226151 
L 356.047443 37.311145 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_16">
    <path clip-path="url(#p187d14f90c)" d="M 51.683807 20.093268 
L 54.758187 20.802214 
L 57.832567 19.91393 
L 60.906947 17.083636 
L 63.981327 17.814335 
L 67.055708 23.795634 
L 70.130088 22.715172 
L 73.204468 23.057161 
L 76.278848 26.784272 
L 79.353228 25.793187 
L 82.427608 28.29997 
L 85.501989 27.657694 
L 88.576369 28.363371 
L 91.650749 31.171859 
L 94.725129 34.261075 
L 97.799509 34.891871 
L 100.873889 38.516851 
L 103.94827 39.138467 
L 107.02265 41.923133 
L 110.09703 45.189362 
L 113.17141 48.03458 
L 116.24579 51.725948 
L 119.32017 55.17485 
L 122.394551 31.287082 
L 125.468931 38.718793 
L 128.543311 47.253636 
L 131.617691 31.953606 
L 134.692071 39.713108 
L 137.766451 44.943794 
L 140.840832 33.53494 
L 143.915212 42.442927 
L 146.989592 34.948553 
L 150.063972 45.704228 
L 153.138352 33.823203 
L 156.212732 36.365163 
L 159.287113 37.21616 
L 162.361493 44.551243 
L 165.435873 35.18517 
L 168.510253 36.89449 
L 171.584633 43.175715 
L 174.659013 34.660974 
L 177.733394 35.965352 
L 180.807774 35.653665 
L 183.882154 38.013158 
L 186.956534 39.897968 
L 190.030914 36.809474 
L 193.105294 43.950283 
L 196.179675 36.489521 
L 199.254055 35.522069 
L 202.328435 37.324712 
L 205.402815 37.311788 
L 208.477195 37.961941 
L 211.551575 44.242612 
L 214.625956 36.880989 
L 217.700336 36.000384 
L 220.774716 36.34513 
L 223.849096 36.270813 
L 226.923476 37.40821 
L 229.997856 44.608953 
L 233.072237 36.863678 
L 236.146617 38.268302 
L 239.220997 37.009283 
L 242.295377 37.741802 
L 245.369757 37.049525 
L 248.444137 37.079707 
L 251.518518 36.373559 
L 254.592898 35.972639 
L 257.667278 37.164514 
L 260.741658 37.525566 
L 263.816038 45.529312 
L 266.890418 38.093106 
L 269.964799 36.412988 
L 273.039179 37.611055 
L 276.113559 36.897772 
L 279.187939 36.267343 
L 282.262319 36.415951 
L 285.336699 37.633776 
L 288.41108 38.155801 
L 291.48546 37.893474 
L 294.55984 36.303431 
L 297.63422 35.318555 
L 300.7086 37.21859 
L 303.78298 38.339851 
L 306.857361 39.650981 
L 309.931741 38.066705 
L 313.006121 45.944545 
L 316.080501 34.590795 
L 319.154881 36.73432 
L 322.229261 38.157849 
L 325.303642 37.956147 
L 328.378022 37.21492 
L 331.452402 36.360601 
L 334.526782 35.815736 
L 337.601162 36.202586 
L 340.675542 35.630622 
L 343.749923 37.961168 
L 346.824303 36.581378 
L 349.898683 36.582045 
L 352.973063 36.253444 
L 356.047443 36.672499 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_17">
    <path clip-path="url(#p187d14f90c)" d="M 51.683807 214.708006 
L 54.758187 214.709774 
L 57.832567 214.70829 
L 60.906947 214.702915 
L 63.981327 214.703896 
L 67.055708 214.709064 
L 70.130088 214.7103 
L 73.204468 214.711 
L 76.278848 214.713335 
L 79.353228 214.714183 
L 82.427608 214.715898 
L 85.501989 214.717171 
L 88.576369 214.718308 
L 91.650749 214.719741 
L 94.725129 214.722266 
L 97.799509 214.724299 
L 100.873889 214.726672 
L 103.94827 214.729169 
L 107.02265 214.732536 
L 110.09703 214.735766 
L 113.17141 214.739047 
L 116.24579 214.742913 
L 119.32017 214.747352 
L 122.394551 214.734249 
L 125.468931 214.747693 
L 128.543311 214.749067 
L 131.617691 214.735064 
L 134.692071 214.749311 
L 137.766451 214.750143 
L 140.840832 214.736168 
L 143.915212 214.750527 
L 146.989592 214.738421 
L 150.063972 214.751636 
L 153.138352 214.736532 
L 156.212732 214.73901 
L 159.287113 214.751712 
L 162.361493 214.752349 
L 165.435873 214.73974 
L 168.510253 214.752502 
L 171.584633 214.753037 
L 174.659013 214.738104 
L 177.733394 214.740804 
L 180.807774 214.740963 
L 183.882154 214.753132 
L 186.956534 214.753326 
L 190.030914 214.742266 
L 193.105294 214.753956 
L 196.179675 214.740733 
L 199.254055 214.742593 
L 202.328435 214.741588 
L 205.402815 214.742587 
L 208.477195 214.742075 
L 211.551575 214.754391 
L 214.625956 214.741317 
L 217.700336 214.742287 
L 220.774716 214.741898 
L 223.849096 214.742746 
L 226.923476 214.743221 
L 229.997856 214.754997 
L 233.072237 214.74162 
L 236.146617 214.742329 
L 239.220997 214.742937 
L 242.295377 214.742666 
L 245.369757 214.742821 
L 248.444137 214.742736 
L 251.518518 214.742126 
L 254.592898 214.741969 
L 257.667278 214.743312 
L 260.741658 214.742378 
L 263.816038 214.755686 
L 266.890418 214.743036 
L 269.964799 214.743066 
L 273.039179 214.743983 
L 276.113559 214.744698 
L 279.187939 214.744216 
L 282.262319 214.742654 
L 285.336699 214.742464 
L 288.41108 214.742151 
L 291.48546 214.742693 
L 294.55984 214.742024 
L 297.63422 214.741454 
L 300.7086 214.742724 
L 303.78298 214.743332 
L 306.857361 214.75581 
L 309.931741 214.74407 
L 313.006121 214.756364 
L 316.080501 214.741783 
L 319.154881 214.74278 
L 322.229261 214.74317 
L 325.303642 214.743538 
L 328.378022 214.742248 
L 331.452402 214.740908 
L 334.526782 214.742141 
L 337.601162 214.741458 
L 340.675542 214.741668 
L 343.749923 214.742911 
L 346.824303 214.742471 
L 349.898683 214.743049 
L 352.973063 214.742696 
L 356.047443 214.741546 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 36.465625 224.64 
L 36.465625 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 371.265625 224.64 
L 371.265625 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 36.465625 224.64 
L 371.265625 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 36.465625 7.2 
L 371.265625 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 213.69375 139.854375 
L 364.265625 139.854375 
Q 366.265625 139.854375 366.265625 137.854375 
L 366.265625 93.985625 
Q 366.265625 91.985625 364.265625 91.985625 
L 213.69375 91.985625 
Q 211.69375 91.985625 211.69375 93.985625 
L 211.69375 137.854375 
Q 211.69375 139.854375 213.69375 139.854375 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_18">
     <path d="M 215.69375 100.084063 
L 235.69375 100.084063 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_19"/>
    <g id="text_16">
     <!-- avg_strategic_value -->
     <g transform="translate(243.69375 103.584063)scale(0.1 -0.1)">
      <defs>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
       <path d="M 191 3500 
L 800 3500 
L 1894 563 
L 2988 3500 
L 3597 3500 
L 2284 0 
L 1503 0 
L 191 3500 
z
" id="DejaVuSans-76" transform="scale(0.015625)"/>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
       <path d="M 544 1381 
L 544 3500 
L 1119 3500 
L 1119 1403 
Q 1119 906 1312 657 
Q 1506 409 1894 409 
Q 2359 409 2629 706 
Q 2900 1003 2900 1516 
L 2900 3500 
L 3475 3500 
L 3475 0 
L 2900 0 
L 2900 538 
Q 2691 219 2414 64 
Q 2138 -91 1772 -91 
Q 1169 -91 856 284 
Q 544 659 544 1381 
z
M 1991 3584 
L 1991 3584 
z
" id="DejaVuSans-75" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-61"/>
      <use x="61.279297" xlink:href="#DejaVuSans-76"/>
      <use x="120.458984" xlink:href="#DejaVuSans-67"/>
      <use x="183.935547" xlink:href="#DejaVuSans-5f"/>
      <use x="233.935547" xlink:href="#DejaVuSans-73"/>
      <use x="286.035156" xlink:href="#DejaVuSans-74"/>
      <use x="325.244141" xlink:href="#DejaVuSans-72"/>
      <use x="366.357422" xlink:href="#DejaVuSans-61"/>
      <use x="427.636719" xlink:href="#DejaVuSans-74"/>
      <use x="466.845703" xlink:href="#DejaVuSans-65"/>
      <use x="528.369141" xlink:href="#DejaVuSans-67"/>
      <use x="591.845703" xlink:href="#DejaVuSans-69"/>
      <use x="619.628906" xlink:href="#DejaVuSans-63"/>
      <use x="674.609375" xlink:href="#DejaVuSans-5f"/>
      <use x="724.609375" xlink:href="#DejaVuSans-76"/>
      <use x="783.789062" xlink:href="#DejaVuSans-61"/>
      <use x="845.068359" xlink:href="#DejaVuSans-6c"/>
      <use x="872.851562" xlink:href="#DejaVuSans-75"/>
      <use x="936.230469" xlink:href="#DejaVuSans-65"/>
     </g>
    </g>
    <g id="line2d_20">
     <path d="M 215.69375 115.040313 
L 235.69375 115.040313 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_21"/>
    <g id="text_17">
     <!-- avg_nonstrategic_value -->
     <g transform="translate(243.69375 118.540313)scale(0.1 -0.1)">
      <defs>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-61"/>
      <use x="61.279297" xlink:href="#DejaVuSans-76"/>
      <use x="120.458984" xlink:href="#DejaVuSans-67"/>
      <use x="183.935547" xlink:href="#DejaVuSans-5f"/>
      <use x="233.935547" xlink:href="#DejaVuSans-6e"/>
      <use x="297.314453" xlink:href="#DejaVuSans-6f"/>
      <use x="358.496094" xlink:href="#DejaVuSans-6e"/>
      <use x="421.875" xlink:href="#DejaVuSans-73"/>
      <use x="473.974609" xlink:href="#DejaVuSans-74"/>
      <use x="513.183594" xlink:href="#DejaVuSans-72"/>
      <use x="554.296875" xlink:href="#DejaVuSans-61"/>
      <use x="615.576172" xlink:href="#DejaVuSans-74"/>
      <use x="654.785156" xlink:href="#DejaVuSans-65"/>
      <use x="716.308594" xlink:href="#DejaVuSans-67"/>
      <use x="779.785156" xlink:href="#DejaVuSans-69"/>
      <use x="807.568359" xlink:href="#DejaVuSans-63"/>
      <use x="862.548828" xlink:href="#DejaVuSans-5f"/>
      <use x="912.548828" xlink:href="#DejaVuSans-76"/>
      <use x="971.728516" xlink:href="#DejaVuSans-61"/>
      <use x="1033.007812" xlink:href="#DejaVuSans-6c"/>
      <use x="1060.791016" xlink:href="#DejaVuSans-75"/>
      <use x="1124.169922" xlink:href="#DejaVuSans-65"/>
     </g>
    </g>
    <g id="line2d_22">
     <path d="M 215.69375 129.996563 
L 235.69375 129.996563 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_23"/>
    <g id="text_18">
     <!-- blk_min_premium -->
     <g transform="translate(243.69375 133.496563)scale(0.1 -0.1)">
      <defs>
       <path d="M 3328 2828 
Q 3544 3216 3844 3400 
Q 4144 3584 4550 3584 
Q 5097 3584 5394 3201 
Q 5691 2819 5691 2113 
L 5691 0 
L 5113 0 
L 5113 2094 
Q 5113 2597 4934 2840 
Q 4756 3084 4391 3084 
Q 3944 3084 3684 2787 
Q 3425 2491 3425 1978 
L 3425 0 
L 2847 0 
L 2847 2094 
Q 2847 2600 2669 2842 
Q 2491 3084 2119 3084 
Q 1678 3084 1418 2786 
Q 1159 2488 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1356 3278 1631 3431 
Q 1906 3584 2284 3584 
Q 2666 3584 2933 3390 
Q 3200 3197 3328 2828 
z
" id="DejaVuSans-6d" transform="scale(0.015625)"/>
       <path d="M 1159 525 
L 1159 -1331 
L 581 -1331 
L 581 3500 
L 1159 3500 
L 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
z
M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
" id="DejaVuSans-70" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6b"/>
      <use x="149.169922" xlink:href="#DejaVuSans-5f"/>
      <use x="199.169922" xlink:href="#DejaVuSans-6d"/>
      <use x="296.582031" xlink:href="#DejaVuSans-69"/>
      <use x="324.365234" xlink:href="#DejaVuSans-6e"/>
      <use x="387.744141" xlink:href="#DejaVuSans-5f"/>
      <use x="437.744141" xlink:href="#DejaVuSans-70"/>
      <use x="501.220703" xlink:href="#DejaVuSans-72"/>
      <use x="540.083984" xlink:href="#DejaVuSans-65"/>
      <use x="601.607422" xlink:href="#DejaVuSans-6d"/>
      <use x="699.019531" xlink:href="#DejaVuSans-69"/>
      <use x="726.802734" xlink:href="#DejaVuSans-75"/>
      <use x="790.181641" xlink:href="#DejaVuSans-6d"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="p187d14f90c">
   <rect height="217.44" width="334.8" x="36.465625" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We recognise familiar dynamics: for the first 10 blocks or so, non-strategic users are not included, being outbid by strategic users. Once the basefee prices out enough transactions, there is room for strategic users to join. High-value users get in first, since their premium increases with their value. Yet once the basefee stabilises, both groups of included users have equal average value.</p>
<p>It is useful to obtain a counterfactual, to check what the results would be with all users non-strategic. We set the <code>strategic_share</code> to zero and run the simulation again.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">strategic_share</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">shares_scenario</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="n">StrategicUser</span><span class="p">:</span> <span class="n">strategic_share</span><span class="p">,</span>
    <span class="n">OptimisticUser</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">strategic_share</span><span class="p">,</span>
<span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">blocks</span><span class="p">)]</span>

<span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">user_pool2</span><span class="p">,</span> <span class="n">chain2</span><span class="p">)</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="n">demand_scenario</span><span class="p">,</span> <span class="n">shares_scenario</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>


<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr">
<pre>100%|██████████| 100/100 [00:13&lt;00:00,  7.61it/s]
</pre>
</div>
</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Obtain the pool of users (all users spawned by the simulation)</span>
<span class="n">user_pool_df2</span> <span class="o">=</span> <span class="n">user_pool2</span><span class="o">.</span><span class="n">export</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;pub_key&quot;</span><span class="p">:</span> <span class="s2">&quot;sender&quot;</span> <span class="p">})</span>

<span class="c1"># Export the trace of the chain, all transactions included in blocks</span>
<span class="n">chain_df2</span> <span class="o">=</span> <span class="n">chain2</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>

<span class="c1"># Join the two to associate transactions with their senders</span>
<span class="n">user_txs_df2</span> <span class="o">=</span> <span class="n">chain_df2</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_pool_df2</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;sender&quot;</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;sender&quot;</span><span class="p">)</span>

<span class="c1"># Obtain per user type statistics</span>
<span class="n">txs_per_user_type2</span> <span class="o">=</span> <span class="n">user_txs_df2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="s2">&quot;user_type&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="p">{</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">]</span> <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">level</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>We look at the average value of included users in our original scenario and the counterfactual.</p>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<details>
    <summary>Open code input</summary>
    <div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div></div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">compare</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;block_height&quot;</span><span class="p">:</span> <span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span>
    <span class="s2">&quot;strat&quot;</span><span class="p">:</span> <span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span>
    <span class="s2">&quot;nonstrat&quot;</span><span class="p">:</span> <span class="n">txs_per_user_type</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;nonstrat_counterfact&quot;</span><span class="p">:</span> <span class="n">txs_per_user_type2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="p">})</span>

<span class="n">compare</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;block_height&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;strat&quot;</span><span class="p">,</span> <span class="s2">&quot;nonstrat&quot;</span><span class="p">,</span> <span class="s2">&quot;nonstrat_counterfact&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">21</span><span class="p">])</span>
</pre></div>

     </div>
</div>
</div>
</div>

  </details>

<div class="jp-Cell-outputWrapper">


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
  <div></div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>(10.0, 21.0)</pre>
</div>

</div>

<div class="jp-OutputArea-child">

    
  <div></div>



<div class="jp-RenderedSVG jp-OutputArea-output " data-mime-type="image/svg+xml">
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="262.474375pt" version="1.1" viewBox="0 0 368.925 262.474375" width="368.925pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-06-13T18:30:33.986717</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.4.2, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M -0 262.474375 
L 368.925 262.474375 
L 368.925 0 
L -0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 26.925 224.64 
L 361.725 224.64 
L 361.725 7.2 
L 26.925 7.2 
z
" style="fill:#ffffff;"/>
   </g>
   <g id="matplotlib.axis_1">
    <g id="xtick_1">
     <g id="line2d_1">
      <defs>
       <path d="M 0 0 
L 0 3.5 
" id="m4f0022018d" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="42.143182" xlink:href="#m4f0022018d" y="224.64"/>
      </g>
     </g>
     <g id="text_1">
      <!-- 0 -->
      <g transform="translate(38.961932 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 4250 
Q 1547 4250 1301 3770 
Q 1056 3291 1056 2328 
Q 1056 1369 1301 889 
Q 1547 409 2034 409 
Q 2525 409 2770 889 
Q 3016 1369 3016 2328 
Q 3016 3291 2770 3770 
Q 2525 4250 2034 4250 
z
M 2034 4750 
Q 2819 4750 3233 4129 
Q 3647 3509 3647 2328 
Q 3647 1150 3233 529 
Q 2819 -91 2034 -91 
Q 1250 -91 836 529 
Q 422 1150 422 2328 
Q 422 3509 836 4129 
Q 1250 4750 2034 4750 
z
" id="DejaVuSans-30" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_2">
     <g id="line2d_2">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="103.630785" xlink:href="#m4f0022018d" y="224.64"/>
      </g>
     </g>
     <g id="text_2">
      <!-- 20 -->
      <g transform="translate(97.268285 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 1228 531 
L 3431 531 
L 3431 0 
L 469 0 
L 469 531 
Q 828 903 1448 1529 
Q 2069 2156 2228 2338 
Q 2531 2678 2651 2914 
Q 2772 3150 2772 3378 
Q 2772 3750 2511 3984 
Q 2250 4219 1831 4219 
Q 1534 4219 1204 4116 
Q 875 4013 500 3803 
L 500 4441 
Q 881 4594 1212 4672 
Q 1544 4750 1819 4750 
Q 2544 4750 2975 4387 
Q 3406 4025 3406 3419 
Q 3406 3131 3298 2873 
Q 3191 2616 2906 2266 
Q 2828 2175 2409 1742 
Q 1991 1309 1228 531 
z
" id="DejaVuSans-32" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_3">
     <g id="line2d_3">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="165.118388" xlink:href="#m4f0022018d" y="224.64"/>
      </g>
     </g>
     <g id="text_3">
      <!-- 40 -->
      <g transform="translate(158.755888 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2419 4116 
L 825 1625 
L 2419 1625 
L 2419 4116 
z
M 2253 4666 
L 3047 4666 
L 3047 1625 
L 3713 1625 
L 3713 1100 
L 3047 1100 
L 3047 0 
L 2419 0 
L 2419 1100 
L 313 1100 
L 313 1709 
L 2253 4666 
z
" id="DejaVuSans-34" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-34"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_4">
     <g id="line2d_4">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="226.605992" xlink:href="#m4f0022018d" y="224.64"/>
      </g>
     </g>
     <g id="text_4">
      <!-- 60 -->
      <g transform="translate(220.243492 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2113 2584 
Q 1688 2584 1439 2293 
Q 1191 2003 1191 1497 
Q 1191 994 1439 701 
Q 1688 409 2113 409 
Q 2538 409 2786 701 
Q 3034 994 3034 1497 
Q 3034 2003 2786 2293 
Q 2538 2584 2113 2584 
z
M 3366 4563 
L 3366 3988 
Q 3128 4100 2886 4159 
Q 2644 4219 2406 4219 
Q 1781 4219 1451 3797 
Q 1122 3375 1075 2522 
Q 1259 2794 1537 2939 
Q 1816 3084 2150 3084 
Q 2853 3084 3261 2657 
Q 3669 2231 3669 1497 
Q 3669 778 3244 343 
Q 2819 -91 2113 -91 
Q 1303 -91 875 529 
Q 447 1150 447 2328 
Q 447 3434 972 4092 
Q 1497 4750 2381 4750 
Q 2619 4750 2861 4703 
Q 3103 4656 3366 4563 
z
" id="DejaVuSans-36" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-36"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_5">
     <g id="line2d_5">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="288.093595" xlink:href="#m4f0022018d" y="224.64"/>
      </g>
     </g>
     <g id="text_5">
      <!-- 80 -->
      <g transform="translate(281.731095 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 2034 2216 
Q 1584 2216 1326 1975 
Q 1069 1734 1069 1313 
Q 1069 891 1326 650 
Q 1584 409 2034 409 
Q 2484 409 2743 651 
Q 3003 894 3003 1313 
Q 3003 1734 2745 1975 
Q 2488 2216 2034 2216 
z
M 1403 2484 
Q 997 2584 770 2862 
Q 544 3141 544 3541 
Q 544 4100 942 4425 
Q 1341 4750 2034 4750 
Q 2731 4750 3128 4425 
Q 3525 4100 3525 3541 
Q 3525 3141 3298 2862 
Q 3072 2584 2669 2484 
Q 3125 2378 3379 2068 
Q 3634 1759 3634 1313 
Q 3634 634 3220 271 
Q 2806 -91 2034 -91 
Q 1263 -91 848 271 
Q 434 634 434 1313 
Q 434 1759 690 2068 
Q 947 2378 1403 2484 
z
M 1172 3481 
Q 1172 3119 1398 2916 
Q 1625 2713 2034 2713 
Q 2441 2713 2670 2916 
Q 2900 3119 2900 3481 
Q 2900 3844 2670 4047 
Q 2441 4250 2034 4250 
Q 1625 4250 1398 4047 
Q 1172 3844 1172 3481 
z
" id="DejaVuSans-38" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-38"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="xtick_6">
     <g id="line2d_6">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="349.581198" xlink:href="#m4f0022018d" y="224.64"/>
      </g>
     </g>
     <g id="text_6">
      <!-- 100 -->
      <g transform="translate(340.037448 239.238438)scale(0.1 -0.1)">
       <defs>
        <path d="M 794 531 
L 1825 531 
L 1825 4091 
L 703 3866 
L 703 4441 
L 1819 4666 
L 2450 4666 
L 2450 531 
L 3481 531 
L 3481 0 
L 794 0 
L 794 531 
z
" id="DejaVuSans-31" transform="scale(0.015625)"/>
       </defs>
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
       <use x="127.246094" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="text_7">
     <!-- block_height -->
     <g transform="translate(162.620313 252.916563)scale(0.1 -0.1)">
      <defs>
       <path d="M 3116 1747 
Q 3116 2381 2855 2742 
Q 2594 3103 2138 3103 
Q 1681 3103 1420 2742 
Q 1159 2381 1159 1747 
Q 1159 1113 1420 752 
Q 1681 391 2138 391 
Q 2594 391 2855 752 
Q 3116 1113 3116 1747 
z
M 1159 2969 
Q 1341 3281 1617 3432 
Q 1894 3584 2278 3584 
Q 2916 3584 3314 3078 
Q 3713 2572 3713 1747 
Q 3713 922 3314 415 
Q 2916 -91 2278 -91 
Q 1894 -91 1617 61 
Q 1341 213 1159 525 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2969 
z
" id="DejaVuSans-62" transform="scale(0.015625)"/>
       <path d="M 603 4863 
L 1178 4863 
L 1178 0 
L 603 0 
L 603 4863 
z
" id="DejaVuSans-6c" transform="scale(0.015625)"/>
       <path d="M 1959 3097 
Q 1497 3097 1228 2736 
Q 959 2375 959 1747 
Q 959 1119 1226 758 
Q 1494 397 1959 397 
Q 2419 397 2687 759 
Q 2956 1122 2956 1747 
Q 2956 2369 2687 2733 
Q 2419 3097 1959 3097 
z
M 1959 3584 
Q 2709 3584 3137 3096 
Q 3566 2609 3566 1747 
Q 3566 888 3137 398 
Q 2709 -91 1959 -91 
Q 1206 -91 779 398 
Q 353 888 353 1747 
Q 353 2609 779 3096 
Q 1206 3584 1959 3584 
z
" id="DejaVuSans-6f" transform="scale(0.015625)"/>
       <path d="M 3122 3366 
L 3122 2828 
Q 2878 2963 2633 3030 
Q 2388 3097 2138 3097 
Q 1578 3097 1268 2742 
Q 959 2388 959 1747 
Q 959 1106 1268 751 
Q 1578 397 2138 397 
Q 2388 397 2633 464 
Q 2878 531 3122 666 
L 3122 134 
Q 2881 22 2623 -34 
Q 2366 -91 2075 -91 
Q 1284 -91 818 406 
Q 353 903 353 1747 
Q 353 2603 823 3093 
Q 1294 3584 2113 3584 
Q 2378 3584 2631 3529 
Q 2884 3475 3122 3366 
z
" id="DejaVuSans-63" transform="scale(0.015625)"/>
       <path d="M 581 4863 
L 1159 4863 
L 1159 1991 
L 2875 3500 
L 3609 3500 
L 1753 1863 
L 3688 0 
L 2938 0 
L 1159 1709 
L 1159 0 
L 581 0 
L 581 4863 
z
" id="DejaVuSans-6b" transform="scale(0.015625)"/>
       <path d="M 3263 -1063 
L 3263 -1509 
L -63 -1509 
L -63 -1063 
L 3263 -1063 
z
" id="DejaVuSans-5f" transform="scale(0.015625)"/>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 4863 
L 1159 4863 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-68" transform="scale(0.015625)"/>
       <path d="M 3597 1894 
L 3597 1613 
L 953 1613 
Q 991 1019 1311 708 
Q 1631 397 2203 397 
Q 2534 397 2845 478 
Q 3156 559 3463 722 
L 3463 178 
Q 3153 47 2828 -22 
Q 2503 -91 2169 -91 
Q 1331 -91 842 396 
Q 353 884 353 1716 
Q 353 2575 817 3079 
Q 1281 3584 2069 3584 
Q 2775 3584 3186 3129 
Q 3597 2675 3597 1894 
z
M 3022 2063 
Q 3016 2534 2758 2815 
Q 2500 3097 2075 3097 
Q 1594 3097 1305 2825 
Q 1016 2553 972 2059 
L 3022 2063 
z
" id="DejaVuSans-65" transform="scale(0.015625)"/>
       <path d="M 603 3500 
L 1178 3500 
L 1178 0 
L 603 0 
L 603 3500 
z
M 603 4863 
L 1178 4863 
L 1178 4134 
L 603 4134 
L 603 4863 
z
" id="DejaVuSans-69" transform="scale(0.015625)"/>
       <path d="M 2906 1791 
Q 2906 2416 2648 2759 
Q 2391 3103 1925 3103 
Q 1463 3103 1205 2759 
Q 947 2416 947 1791 
Q 947 1169 1205 825 
Q 1463 481 1925 481 
Q 2391 481 2648 825 
Q 2906 1169 2906 1791 
z
M 3481 434 
Q 3481 -459 3084 -895 
Q 2688 -1331 1869 -1331 
Q 1566 -1331 1297 -1286 
Q 1028 -1241 775 -1147 
L 775 -588 
Q 1028 -725 1275 -790 
Q 1522 -856 1778 -856 
Q 2344 -856 2625 -561 
Q 2906 -266 2906 331 
L 2906 616 
Q 2728 306 2450 153 
Q 2172 0 1784 0 
Q 1141 0 747 490 
Q 353 981 353 1791 
Q 353 2603 747 3093 
Q 1141 3584 1784 3584 
Q 2172 3584 2450 3431 
Q 2728 3278 2906 2969 
L 2906 3500 
L 3481 3500 
L 3481 434 
z
" id="DejaVuSans-67" transform="scale(0.015625)"/>
       <path d="M 1172 4494 
L 1172 3500 
L 2356 3500 
L 2356 3053 
L 1172 3053 
L 1172 1153 
Q 1172 725 1289 603 
Q 1406 481 1766 481 
L 2356 481 
L 2356 0 
L 1766 0 
Q 1100 0 847 248 
Q 594 497 594 1153 
L 594 3053 
L 172 3053 
L 172 3500 
L 594 3500 
L 594 4494 
L 1172 4494 
z
" id="DejaVuSans-74" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-62"/>
      <use x="63.476562" xlink:href="#DejaVuSans-6c"/>
      <use x="91.259766" xlink:href="#DejaVuSans-6f"/>
      <use x="152.441406" xlink:href="#DejaVuSans-63"/>
      <use x="207.421875" xlink:href="#DejaVuSans-6b"/>
      <use x="265.332031" xlink:href="#DejaVuSans-5f"/>
      <use x="315.332031" xlink:href="#DejaVuSans-68"/>
      <use x="378.710938" xlink:href="#DejaVuSans-65"/>
      <use x="440.234375" xlink:href="#DejaVuSans-69"/>
      <use x="468.017578" xlink:href="#DejaVuSans-67"/>
      <use x="531.494141" xlink:href="#DejaVuSans-68"/>
      <use x="594.873047" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
   </g>
   <g id="matplotlib.axis_2">
    <g id="ytick_1">
     <g id="line2d_7">
      <defs>
       <path d="M 0 0 
L -3.5 0 
" id="m66f2e0cf82" style="stroke:#000000;stroke-width:0.8;"/>
      </defs>
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m66f2e0cf82" y="224.64"/>
      </g>
     </g>
     <g id="text_8">
      <!-- 10 -->
      <g transform="translate(7.2 228.439219)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
    <g id="ytick_2">
     <g id="line2d_8">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m66f2e0cf82" y="185.105455"/>
      </g>
     </g>
     <g id="text_9">
      <!-- 12 -->
      <g transform="translate(7.2 188.904673)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-32"/>
      </g>
     </g>
    </g>
    <g id="ytick_3">
     <g id="line2d_9">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m66f2e0cf82" y="145.570909"/>
      </g>
     </g>
     <g id="text_10">
      <!-- 14 -->
      <g transform="translate(7.2 149.370128)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-34"/>
      </g>
     </g>
    </g>
    <g id="ytick_4">
     <g id="line2d_10">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m66f2e0cf82" y="106.036364"/>
      </g>
     </g>
     <g id="text_11">
      <!-- 16 -->
      <g transform="translate(7.2 109.835582)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-36"/>
      </g>
     </g>
    </g>
    <g id="ytick_5">
     <g id="line2d_11">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m66f2e0cf82" y="66.501818"/>
      </g>
     </g>
     <g id="text_12">
      <!-- 18 -->
      <g transform="translate(7.2 70.301037)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-31"/>
       <use x="63.623047" xlink:href="#DejaVuSans-38"/>
      </g>
     </g>
    </g>
    <g id="ytick_6">
     <g id="line2d_12">
      <g>
       <use style="stroke:#000000;stroke-width:0.8;" x="26.925" xlink:href="#m66f2e0cf82" y="26.967273"/>
      </g>
     </g>
     <g id="text_13">
      <!-- 20 -->
      <g transform="translate(7.2 30.766491)scale(0.1 -0.1)">
       <use xlink:href="#DejaVuSans-32"/>
       <use x="63.623047" xlink:href="#DejaVuSans-30"/>
      </g>
     </g>
    </g>
   </g>
   <g id="line2d_13">
    <path clip-path="url(#pe441c99356)" d="M 42.143182 202.203009 
L 45.217562 200.536184 
L 48.291942 204.647165 
L 51.366322 196.61986 
L 54.440702 197.152236 
L 57.515083 191.641112 
L 60.589463 190.610918 
L 63.663843 191.022018 
L 66.738223 187.861997 
L 69.812603 188.658491 
L 72.886983 179.011811 
L 75.961364 174.771067 
L 79.035744 176.648174 
L 82.110124 169.905376 
L 85.184504 164.19967 
L 88.258884 159.434263 
L 91.333264 146.297627 
L 94.407645 141.947014 
L 97.482025 131.246085 
L 100.556405 122.500876 
L 103.630785 109.834735 
L 106.705165 95.4756 
L 109.779545 80.968413 
L 112.853926 65.112123 
L 115.928306 67.020234 
L 119.002686 69.204083 
L 122.077066 64.75878 
L 125.151446 69.405916 
L 128.225826 69.112069 
L 131.300207 66.582473 
L 134.374587 70.581524 
L 137.448967 66.223461 
L 140.523347 74.91852 
L 143.597727 68.077706 
L 146.672107 68.600473 
L 149.746488 69.503433 
L 152.820868 73.690238 
L 155.895248 70.52879 
L 158.969628 71.111584 
L 162.044008 72.565306 
L 165.118388 71.216839 
L 168.192769 73.411373 
L 171.267149 72.444102 
L 174.341529 70.708289 
L 177.415909 72.636619 
L 180.490289 69.096802 
L 183.564669 72.208238 
L 186.63905 70.895631 
L 189.71343 72.652902 
L 192.78781 70.703774 
L 195.86219 73.950793 
L 198.93657 71.239219 
L 202.01095 74.090265 
L 205.085331 72.861448 
L 208.159711 73.606121 
L 211.234091 72.997369 
L 214.308471 77.262055 
L 217.382851 72.891947 
L 220.457231 74.311678 
L 223.531612 67.505891 
L 226.605992 71.766958 
L 229.680372 72.832124 
L 232.754752 71.34675 
L 235.829132 70.613511 
L 238.903512 73.737865 
L 241.977893 74.658481 
L 245.052273 75.051895 
L 248.126653 74.073937 
L 251.201033 72.998664 
L 254.275413 75.102406 
L 257.349793 74.44227 
L 260.424174 73.612273 
L 263.498554 72.399124 
L 266.572934 74.915888 
L 269.647314 74.533268 
L 272.721694 73.319876 
L 275.796074 76.119455 
L 278.870455 70.984082 
L 281.944835 73.474519 
L 285.019215 72.028634 
L 288.093595 73.590995 
L 291.167975 70.639273 
L 294.242355 74.256651 
L 297.316736 75.015828 
L 300.391116 76.669016 
L 303.465496 75.604271 
L 306.539876 73.460903 
L 309.614256 74.967635 
L 312.688636 74.130432 
L 315.763017 76.001343 
L 318.837397 71.993765 
L 321.911777 70.397738 
L 324.986157 73.262385 
L 328.060537 69.562731 
L 331.134917 71.614036 
L 334.209298 72.410827 
L 337.283678 74.550233 
L 340.358058 74.587211 
L 343.432438 72.852031 
L 346.506818 74.854022 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_14">
    <path clip-path="url(#pe441c99356)" d="M 42.143182 43.084233 
L 45.217562 44.392354 
L 48.291942 42.753325 
L 51.366322 37.530972 
L 54.440702 38.879231 
L 57.515083 49.915702 
L 60.589463 47.922074 
L 63.663843 48.553099 
L 66.738223 55.430225 
L 69.812603 53.601512 
L 72.886983 58.226935 
L 75.961364 57.041832 
L 79.035744 58.34392 
L 82.110124 63.526038 
L 85.184504 69.226146 
L 88.258884 70.390068 
L 91.333264 77.078746 
L 94.407645 78.22573 
L 97.482025 83.363892 
L 100.556405 89.390615 
L 103.630785 94.640507 
L 106.705165 101.451681 
L 109.779545 107.815469 
L 112.853926 63.738645 
L 115.928306 77.451362 
L 119.002686 93.199539 
L 122.077066 64.968489 
L 125.151446 79.286036 
L 128.225826 88.937502 
L 131.300207 67.886308 
L 134.374587 84.322996 
L 137.448967 70.494654 
L 140.523347 90.340628 
L 143.597727 68.4182 
L 146.672107 73.10853 
L 149.746488 74.678759 
L 152.820868 88.213182 
L 155.895248 70.931252 
L 158.969628 74.085226 
L 162.044008 85.67511 
L 165.118388 69.964024 
L 168.192769 72.370815 
L 171.267149 71.7957 
L 174.341529 76.14935 
L 177.415909 79.627132 
L 180.490289 73.928356 
L 183.564669 87.104314 
L 186.63905 73.337992 
L 189.71343 71.552885 
L 192.78781 74.879055 
L 195.86219 74.855208 
L 198.93657 76.054847 
L 202.01095 87.643708 
L 205.085331 74.060314 
L 208.159711 72.435454 
L 211.234091 73.071567 
L 214.308471 72.934439 
L 217.382851 75.033123 
L 220.457231 88.319666 
L 223.531612 74.028373 
L 226.605992 76.620133 
L 229.680372 74.297038 
L 232.754752 75.648653 
L 235.829132 74.371289 
L 238.903512 74.426982 
L 241.977893 73.124023 
L 245.052273 72.384261 
L 248.126653 74.583463 
L 251.201033 75.249663 
L 254.275413 90.01788 
L 257.349793 76.296868 
L 260.424174 73.196775 
L 263.498554 75.407404 
L 266.572934 74.091282 
L 269.647314 72.928036 
L 272.721694 73.202243 
L 275.796074 75.449329 
L 278.870455 76.412549 
L 281.944835 75.928514 
L 285.019215 72.994626 
L 288.093595 71.177368 
L 291.167975 74.683243 
L 294.242355 76.752152 
L 297.316736 79.1714 
L 300.391116 76.248153 
L 303.465496 90.784051 
L 306.539876 69.834533 
L 309.614256 73.789685 
L 312.688636 76.416329 
L 315.763017 76.044155 
L 318.837397 74.676471 
L 321.911777 73.100113 
L 324.986157 72.094749 
L 328.060537 72.80855 
L 331.134917 71.753183 
L 334.209298 76.053421 
L 337.283678 73.507483 
L 340.358058 73.508714 
L 343.432438 72.902391 
L 346.506818 73.675615 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="line2d_15">
    <path clip-path="url(#pe441c99356)" d="M 42.143182 123.774526 
L 45.217562 121.349536 
L 48.291942 116.626375 
L 51.366322 121.571762 
L 54.440702 124.545814 
L 57.515083 125.432375 
L 60.589463 127.63267 
L 63.663843 120.30217 
L 66.738223 120.348911 
L 69.812603 122.96013 
L 72.886983 122.327799 
L 75.961364 122.485688 
L 79.035744 123.600792 
L 82.110124 119.982551 
L 85.184504 114.69327 
L 88.258884 121.203231 
L 91.333264 115.41437 
L 94.407645 127.142579 
L 97.482025 122.341869 
L 100.556405 120.162361 
L 103.630785 114.521743 
L 106.705165 100.120972 
L 109.779545 91.930682 
L 112.853926 85.663667 
L 115.928306 83.878398 
L 119.002686 80.283527 
L 122.077066 75.387288 
L 125.151446 76.460554 
L 128.225826 74.117682 
L 131.300207 74.580725 
L 134.374587 72.961512 
L 137.448967 72.818342 
L 140.523347 75.501572 
L 143.597727 73.826239 
L 146.672107 75.196026 
L 149.746488 75.52831 
L 152.820868 72.666981 
L 155.895248 75.961975 
L 158.969628 73.680309 
L 162.044008 72.648361 
L 165.118388 71.999052 
L 168.192769 69.95642 
L 171.267149 74.05175 
L 174.341529 73.625006 
L 177.415909 75.226158 
L 180.490289 75.695357 
L 183.564669 73.902954 
L 186.63905 77.749005 
L 189.71343 74.077044 
L 192.78781 72.821301 
L 195.86219 74.754873 
L 198.93657 73.839787 
L 202.01095 74.143494 
L 205.085331 74.197828 
L 208.159711 73.600178 
L 211.234091 75.416947 
L 214.308471 72.945663 
L 217.382851 76.293601 
L 220.457231 75.388516 
L 223.531612 74.304245 
L 226.605992 74.027183 
L 229.680372 72.994421 
L 232.754752 73.282912 
L 235.829132 72.900177 
L 238.903512 71.219959 
L 241.977893 73.644271 
L 245.052273 75.49284 
L 248.126653 73.553667 
L 251.201033 72.276584 
L 254.275413 74.638433 
L 257.349793 73.438855 
L 260.424174 76.098609 
L 263.498554 74.196434 
L 266.572934 73.706783 
L 269.647314 73.496805 
L 272.721694 74.358319 
L 275.796074 76.093961 
L 278.870455 74.879859 
L 281.944835 74.994853 
L 285.019215 74.834351 
L 288.093595 75.147103 
L 291.167975 73.323441 
L 294.242355 75.322294 
L 297.316736 75.038213 
L 300.391116 76.694514 
L 303.465496 73.507674 
L 306.539876 74.635011 
L 309.614256 75.063626 
L 312.688636 75.763015 
L 315.763017 74.755471 
L 318.837397 76.062285 
L 321.911777 74.857224 
L 324.986157 75.942493 
L 328.060537 72.082027 
L 331.134917 72.337817 
L 334.209298 72.168328 
L 337.283678 73.347919 
L 340.358058 73.739219 
L 343.432438 73.649707 
L 346.506818 74.606613 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
   </g>
   <g id="patch_3">
    <path d="M 26.925 224.64 
L 26.925 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_4">
    <path d="M 361.725 224.64 
L 361.725 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_5">
    <path d="M 26.925 224.64 
L 361.725 224.64 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="patch_6">
    <path d="M 26.925 7.2 
L 361.725 7.2 
" style="fill:none;stroke:#000000;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
   <g id="legend_1">
    <g id="patch_7">
     <path d="M 218.098438 59.5125 
L 354.725 59.5125 
Q 356.725 59.5125 356.725 57.5125 
L 356.725 14.2 
Q 356.725 12.2 354.725 12.2 
L 218.098438 12.2 
Q 216.098438 12.2 216.098438 14.2 
L 216.098438 57.5125 
Q 216.098438 59.5125 218.098438 59.5125 
z
" style="fill:#ffffff;opacity:0.8;stroke:#cccccc;stroke-linejoin:miter;"/>
    </g>
    <g id="line2d_16">
     <path d="M 220.098438 20.298438 
L 240.098438 20.298438 
" style="fill:none;stroke:#1f77b4;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_17"/>
    <g id="text_14">
     <!-- strat -->
     <g transform="translate(248.098438 23.798438)scale(0.1 -0.1)">
      <defs>
       <path d="M 2834 3397 
L 2834 2853 
Q 2591 2978 2328 3040 
Q 2066 3103 1784 3103 
Q 1356 3103 1142 2972 
Q 928 2841 928 2578 
Q 928 2378 1081 2264 
Q 1234 2150 1697 2047 
L 1894 2003 
Q 2506 1872 2764 1633 
Q 3022 1394 3022 966 
Q 3022 478 2636 193 
Q 2250 -91 1575 -91 
Q 1294 -91 989 -36 
Q 684 19 347 128 
L 347 722 
Q 666 556 975 473 
Q 1284 391 1588 391 
Q 1994 391 2212 530 
Q 2431 669 2431 922 
Q 2431 1156 2273 1281 
Q 2116 1406 1581 1522 
L 1381 1569 
Q 847 1681 609 1914 
Q 372 2147 372 2553 
Q 372 3047 722 3315 
Q 1072 3584 1716 3584 
Q 2034 3584 2315 3537 
Q 2597 3491 2834 3397 
z
" id="DejaVuSans-73" transform="scale(0.015625)"/>
       <path d="M 2631 2963 
Q 2534 3019 2420 3045 
Q 2306 3072 2169 3072 
Q 1681 3072 1420 2755 
Q 1159 2438 1159 1844 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1341 3275 1631 3429 
Q 1922 3584 2338 3584 
Q 2397 3584 2469 3576 
Q 2541 3569 2628 3553 
L 2631 2963 
z
" id="DejaVuSans-72" transform="scale(0.015625)"/>
       <path d="M 2194 1759 
Q 1497 1759 1228 1600 
Q 959 1441 959 1056 
Q 959 750 1161 570 
Q 1363 391 1709 391 
Q 2188 391 2477 730 
Q 2766 1069 2766 1631 
L 2766 1759 
L 2194 1759 
z
M 3341 1997 
L 3341 0 
L 2766 0 
L 2766 531 
Q 2569 213 2275 61 
Q 1981 -91 1556 -91 
Q 1019 -91 701 211 
Q 384 513 384 1019 
Q 384 1609 779 1909 
Q 1175 2209 1959 2209 
L 2766 2209 
L 2766 2266 
Q 2766 2663 2505 2880 
Q 2244 3097 1772 3097 
Q 1472 3097 1187 3025 
Q 903 2953 641 2809 
L 641 3341 
Q 956 3463 1253 3523 
Q 1550 3584 1831 3584 
Q 2591 3584 2966 3190 
Q 3341 2797 3341 1997 
z
" id="DejaVuSans-61" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-73"/>
      <use x="52.099609" xlink:href="#DejaVuSans-74"/>
      <use x="91.308594" xlink:href="#DejaVuSans-72"/>
      <use x="132.421875" xlink:href="#DejaVuSans-61"/>
      <use x="193.701172" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
    <g id="line2d_18">
     <path d="M 220.098438 34.976563 
L 240.098438 34.976563 
" style="fill:none;stroke:#ff7f0e;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_19"/>
    <g id="text_15">
     <!-- nonstrat -->
     <g transform="translate(248.098438 38.476563)scale(0.1 -0.1)">
      <defs>
       <path d="M 3513 2113 
L 3513 0 
L 2938 0 
L 2938 2094 
Q 2938 2591 2744 2837 
Q 2550 3084 2163 3084 
Q 1697 3084 1428 2787 
Q 1159 2491 1159 1978 
L 1159 0 
L 581 0 
L 581 3500 
L 1159 3500 
L 1159 2956 
Q 1366 3272 1645 3428 
Q 1925 3584 2291 3584 
Q 2894 3584 3203 3211 
Q 3513 2838 3513 2113 
z
" id="DejaVuSans-6e" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-6e"/>
      <use x="63.378906" xlink:href="#DejaVuSans-6f"/>
      <use x="124.560547" xlink:href="#DejaVuSans-6e"/>
      <use x="187.939453" xlink:href="#DejaVuSans-73"/>
      <use x="240.039062" xlink:href="#DejaVuSans-74"/>
      <use x="279.248047" xlink:href="#DejaVuSans-72"/>
      <use x="320.361328" xlink:href="#DejaVuSans-61"/>
      <use x="381.640625" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
    <g id="line2d_20">
     <path d="M 220.098438 49.654688 
L 240.098438 49.654688 
" style="fill:none;stroke:#2ca02c;stroke-linecap:square;stroke-width:1.5;"/>
    </g>
    <g id="line2d_21"/>
    <g id="text_16">
     <!-- nonstrat_counterfact -->
     <g transform="translate(248.098438 53.154688)scale(0.1 -0.1)">
      <defs>
       <path d="M 544 1381 
L 544 3500 
L 1119 3500 
L 1119 1403 
Q 1119 906 1312 657 
Q 1506 409 1894 409 
Q 2359 409 2629 706 
Q 2900 1003 2900 1516 
L 2900 3500 
L 3475 3500 
L 3475 0 
L 2900 0 
L 2900 538 
Q 2691 219 2414 64 
Q 2138 -91 1772 -91 
Q 1169 -91 856 284 
Q 544 659 544 1381 
z
M 1991 3584 
L 1991 3584 
z
" id="DejaVuSans-75" transform="scale(0.015625)"/>
       <path d="M 2375 4863 
L 2375 4384 
L 1825 4384 
Q 1516 4384 1395 4259 
Q 1275 4134 1275 3809 
L 1275 3500 
L 2222 3500 
L 2222 3053 
L 1275 3053 
L 1275 0 
L 697 0 
L 697 3053 
L 147 3053 
L 147 3500 
L 697 3500 
L 697 3744 
Q 697 4328 969 4595 
Q 1241 4863 1831 4863 
L 2375 4863 
z
" id="DejaVuSans-66" transform="scale(0.015625)"/>
      </defs>
      <use xlink:href="#DejaVuSans-6e"/>
      <use x="63.378906" xlink:href="#DejaVuSans-6f"/>
      <use x="124.560547" xlink:href="#DejaVuSans-6e"/>
      <use x="187.939453" xlink:href="#DejaVuSans-73"/>
      <use x="240.039062" xlink:href="#DejaVuSans-74"/>
      <use x="279.248047" xlink:href="#DejaVuSans-72"/>
      <use x="320.361328" xlink:href="#DejaVuSans-61"/>
      <use x="381.640625" xlink:href="#DejaVuSans-74"/>
      <use x="420.849609" xlink:href="#DejaVuSans-5f"/>
      <use x="470.849609" xlink:href="#DejaVuSans-63"/>
      <use x="525.830078" xlink:href="#DejaVuSans-6f"/>
      <use x="587.011719" xlink:href="#DejaVuSans-75"/>
      <use x="650.390625" xlink:href="#DejaVuSans-6e"/>
      <use x="713.769531" xlink:href="#DejaVuSans-74"/>
      <use x="752.978516" xlink:href="#DejaVuSans-65"/>
      <use x="814.501953" xlink:href="#DejaVuSans-72"/>
      <use x="855.615234" xlink:href="#DejaVuSans-66"/>
      <use x="890.820312" xlink:href="#DejaVuSans-61"/>
      <use x="952.099609" xlink:href="#DejaVuSans-63"/>
      <use x="1007.080078" xlink:href="#DejaVuSans-74"/>
     </g>
    </g>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="pe441c99356">
   <rect height="217.44" width="334.8" x="26.925" y="7.2"/>
  </clipPath>
 </defs>
</svg>

</div>

</div>

</div>

</div>

</div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
  <p>In the counterfactual scenario, where all users are non-strategic, the average value of included users in the first few blocks is around 16 Gwei per gas. Meanwhile, the average value of included users in the original scenario starts from 12 Gwei per gas!</p>
<p>We see here the impact of various bidding behaviours on <strong>efficiency</strong>. Auctions are typically deemed efficient when high-value users get what what they want, e.g., when the item being auctioned goes to who wants it the most. When users bid as they do in a first-price auction, the fee market is less efficient than when users are non-strategic. Fortunately, <strong>this inefficiency doesn't last</strong>: once the basefee reaches its stationary level, in both the original scenario as well as the counterfactual, similar-valued users are included (namely, the top 475 of them).</p>
<p>In future notebooks, we'll investigate the efficiency properties of different fee market mechanisms.</p>

</div>




    </div>
  </div>
  <script>
  // References + footnotes

// Authors
let authorData = ["barnabe"];
  </script>

  
</body>

  <div id="footer"></div>
    <script>
    ReactDOM.render(
      e(
        Footer, {
          acknowledgements: 'Many thanks to Fred Lacs for comments and code.',
        }
      ),
      document.querySelector("#footer")
    )

    const copyToClipboard = str => {
      const el = document.createElement("textarea") // Create a <textarea> element
      el.value = str // Set its value to the string that you want copied
      el.setAttribute("readonly", "") // Make it readonly to be tamper-proof
      el.style.position = "absolute"
      el.style.left = "-9999px" // Move outside the screen to make it invisible
      document.body.appendChild(el) // Append the <textarea> element to the HTML document
      const selected =
        document.getSelection().rangeCount > 0 // Check if there is any content selected previously
          ? document.getSelection().getRangeAt(0) // Store selection if found
          : false // Mark as false to know no selection existed before
      el.select() // Select the <textarea> content
      document.execCommand("copy") // Copy - only works as a result of a user action (e.g. click events)
      document.body.removeChild(el) // Remove the <textarea> element
      if (selected) {
        // If a selection existed before copying
        document.getSelection().removeAllRanges() // Unselect everything on the HTML document
        document.getSelection().addRange(selected) // Restore the original selection
      }
    }
    function handleCopyClick(evt) {
      // get the children of the parent element
      const { children } = evt.target.parentElement
      // grab the first element (we append the copy button on afterwards, so the first will be the code element)
      // destructure the innerText from the code block
      const { innerText } = Array.from(children)[0]
      // copy all of the code to the clipboard
      copyToClipboard(innerText)
    }

    const highlights = document.querySelectorAll(".jp-InputArea-editor .highlight")

    highlights.forEach(div => {
      // create the copy button
      const copy = document.createElement("button")
      copy.innerHTML = "Copy"
      // add the event listener to each click
      copy.addEventListener("click", handleCopyClick)
      // append the copy button to each code block
      div.append(copy)
    })
    </script>
  </div>
  <script src="https://ethereum.github.io/rig/static/authorFormatting.js"></script>
  <script src="https://ethereum.github.io/rig/static/sectionFormatting.js"></script>
  <script src="https://ethereum.github.io/rig/static/referencesFormatting.js"></script>







</html>
